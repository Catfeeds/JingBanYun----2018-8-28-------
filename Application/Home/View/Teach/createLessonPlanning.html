<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
	<title>{$subnav} :: 京版云</title>
	<meta content='' name='description'>
	<meta content='' name='keywords'>
	<link href="__PUBLIC_THEME__/stylesheets/application-a07755f5.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC_THEME__/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/createLesson/css/createLesson.css?v=3" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/createLesson/css/prod.designer.css?v=3" rel="stylesheet" type="text/css">
	<link href="__PUBLIC__/js/fine-uploader/fine-uploader-new.css" rel="stylesheet" type="text/css" />
	<script src="__PUBLIC__/createLesson/js/render_1.js?" type="text/javascript"></script>
	<link href="__PUBLIC__/createLesson/css/exercise.css?v=2" rel="stylesheet" type="text/css" />
	<script src="__PUBLIC__/js/exercise/sha1.js?" type="text/javascript"></script>
	<link href="__PUBLIC__/infoPerfect/infoPerfect.css?v=1" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" href="__PUBLIC__/css/rotate.css">
	<link href="__PUBLIC__/airView/airView.css?v=1" rel="stylesheet" type="text/css"/>
	<style media="screen">
		video::-internal-media-controls-download-button {
			display:none;
		}

		video::-webkit-media-controls-enclosure {
			overflow:hidden;
		}

		video::-webkit-media-controls-panel {
			width: calc(100% + 30px);
		}
		.slide.active .design-element{
			height: 200px
		}
		audio::-internal-media-controls-download-button {
			display:none;
		}
		audio::-webkit-media-controls {
		    overflow: hidden !important
		}
		audio::-webkit-media-controls-enclosure {
		    width: calc(100% + 32px);
  			margin-left: auto;
		}
	</style>
	<script>
		var slideModel = {};
		var loginUser = {};
		var conf = {};
		var keywords = [];
	</script>
	<script src="__PUBLIC__/js/external/jquery.js" type="text/javascript"></script>
	<script src="__PUBLIC__/js/common.js?v=4.0" type="text/javascript"></script>
	<script src="__PUBLIC__/js/message/messageList.js"></script>
	<script src="__PUBLIC__/js/jQueryRotateCompressed.js?v=1.0" type="text/javascript"></script>

</head>

<body class="designpg mode-normal">
<div class="header">
	<a href="{:U('Teach/index1')}"><img class="logo" src="__PUBLIC__/img/logo.png"></a>

	<div class="navTitle"><img src="__PUBLIC__/img/feature/jiaoxuejia.png" alt=""></div>
	<div style="text-align: center;">
		<img class="navTitleImg" src="__PUBLIC__/img/icon/b_{$navicon}.png">
	</div>

	<div class="navThumWrapper">
		<img id="navThumImg1" data-degree="20" data-url="{:U('ResourceList/resourceList')}" class="navThumImg navThumImg1" src="__PUBLIC__/img/icon/s_jiaoshiziyuan.png">
		<img id="navThumImg2" data-degree="-20" data-url="{:U('Teach/myLessonPlannings')}" class="navThumImg navThumImg2" src="__PUBLIC__/img/icon/s_beikexitong.png">
		<img id="navThumImg3" data-degree="20" data-url="{:U('Teach/textbookList')}" class="navThumImg navThumImg3" src="__PUBLIC__/img/icon/s_dianzikeben.png">
		<img id="navThumImg4" data-degree="-20" data-url="{:U('BjResource/bjResourceIndex')}" class="navThumImg navThumImg4" src="__PUBLIC__/img/icon/s_jingbanziyuan.png">
	</div>
	<div class="topbar">
		<a href="{:U('Teach/index1')}" title="返回功能页">
			<img src="__PUBLIC__/img/bar_home.png" id="gohome">
		</a>
		<?php if (session('teacher') != 'youke'): ?>
		<a target="_blank" href="{:U('Teach/me')}" title="个人中心" style="position:relative">
			<img src="__PUBLIC__/img/bar_person.png" id="gome">
			<div class="messageNum unReadMessageCount"></div>
		</a>
		<?php endif ?>
		<a target="_blank" href="{:U('Help/document')}" title="帮助文档">
			<img src="__PUBLIC__/img/bar_help.png" id="gohelp">
		</a>
		<a href="{:U('Index/index?logout=t')}" title="安全退出">
			<img src="__PUBLIC__/img/bar_logout.png" id="goclose">
		</a>
	</div>
</div>
<div class="welcome">
	<?php if (session('teacher') == 'youke'): ?>
		<span style="display:inline-block;" id="slide_title">
		尊敬的用户，您好!
			<!-- <div id="data_bg">
				<p id="vipp"><img src="__PUBLIC__/img/vip.png">尊敬的用户，您好!</p>
				<p>您的VIP还剩&nbsp;<span>100</span>&nbsp;天！</p>
		<p>您的VIP权限类型是团体VIP</p> -->
			</span>
	<a href="{:U('Index/index?logout=t')}" title="返回首页" class="square-button bg-transparent fg-white bg-hover-dark no-border"><span
			class="mif-switch"></span></a>
	<?php else: ?>
		<?php if (session('teacher_vip.is_vip') == 1): ?>

			<span style="display:inline-block;" id="slide_title">
		<img class="imgVip" src="__PUBLIC__/img/vip.png" style="vertical-align:top;display:inline-block;margin-top:-10px;position:relative;cursor:pointer;">{:session('teacher.name')}老师，您好！
			<div id="data_bg">
				<p id="vipp"><img src="__PUBLIC__/img/vip.png">尊敬的用户，您好!</p>
<!--
				<p><p style="display:inline-block;">您的&nbsp;<a href="javascript:;" class="aVip" style="color:#3B77C3 !important;text-decoration: underline">
				<?php if (session('teacher_vip.is_auth') == 4): ?>
				个人VIP
				<?php else: ?>
				团体VIP
				<?php endif ?>
			</a>&nbsp;</p><?=session('teacher_vip.info')?>还剩&nbsp;<span style="display:inline-block;font-size:18px;"><?=session('teacher_vip.vip_day')?></span>天！</p>
-->
				<?php if (session('teacher_vip.is_vip')== 1): ?>
				<?php if (session('teacher_vip.is_auth') == 3): ?>
				<p style="line-height: 24px;">您的账号仍处于VIP团体<?=session('teacher_vip.info')?>，欢迎使用。</p>
				<?php else: ?>
				<p style="line-height: 24px;">您的账号仍处于个人VIP<?=session('teacher_vip.info')?>，欢迎使用。</p>
				<?php endif; ?>
				<?php endif; ?>
				</div>
				</span>
		<?php else: ?>
			<span style="display:inline-block;" id="slide_title">
			{:session('teacher.name')}老师，您好！
		<!--  <div id="data_bg">
				<p id="vipp"><img src="__PUBLIC__/img/vip.png">尊敬的用户，您好!</p>
				<p>您的VIP还剩&nbsp;<span>100</span>&nbsp;天！</p>
		<p>您的VIP权限类型是团体VIP</p> -->
			</span>
		<?php endif ?>
	<?php endif ?>

</div>
<div class="content">
	<div class="mainbody"></div>

	<div id="creatlessoncontent" style="">
		<div style="margin:0 auto;z-index:1500;height:55px;position:relative" id="btnlist">
			<a class="btnReturn2 " href="javascript:window.history.go(-1);">返回</a>
			<div class="" style="width:1260px;margin:0 auto;">

			<div style="width:960px;margin-left:60px;text-align:center;position:relative" class="row">

				<div class="col-md-3" style="text-align:right">
					<div class="design-element-container" style="display:inline-block;position:relative;width:100px;z-index:10;overflow:hidden" id="poi">
						<div class="design-element tmpl" data-width="324" data-height="154" id="wenben" style="width:90px;border:none;margin:0;height:48px">
							<div class="design-content content-text" >
								双击编辑
							</div>
						</div>

					</div>

					<div style="font-size:14px;color:#333;display:inline-block;position:relative;top:-19px;cursor: pointer;left:-50px" id="wenzi">文本</div>


				</div>
				<div id="uploadfile" class="col-md-3" >
					上传本地文件
				</div>
				<div style="display:inline-block;position:relative" class="col-md-3">
					<button id="removesilder"></button>
					<label for="removesilder" style="font-weight: normal;"><div style="display:inline-block;position:absolute;top: 16px;margin-left: 5px;cursor: pointer;" >清屏</div></label>
				</div>
				<div class="col-md-3" style="position:relative;text-align:left">
					<div style="display:inline-block;">
						<button id="bkg"></button>

					</div>
					<span style="font-size:14px;color:#333;display: inline-block;position:relative;top:-16px;left:5px;cursor: pointer;" id="setback">设置背景图片</span>


					<div id="setbg">
						<div class="blue">
						</div>
						<div id="bgnav" >
							<ul>
								<li id="Scolorbtn" class="cncv">
							<span id="ccolor">
							纯色
							</span>
									<div class="yb"></div>
									<div id="Scolor" class="bgcontntnt" style="background:#494949">
										<script>
											var SelRGB = '#000000';
											var DrRGB = '';
											var SelGRAY = '120';

											var hexch = new Array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F');

											function ToHex(n)
											{	var h, l;

												n = Math.round(n);
												l = n % 16;
												h = Math.floor((n / 16)) % 16;
												return (hexch[h] + hexch[l]);
											}

											function DoColor(c, l)
											{ var r, g, b;

												r = '0x' + c.substring(1, 3);
												g = '0x' + c.substring(3, 5);
												b = '0x' + c.substring(5, 7);

												if(l > 120)
												{
													l = l - 120;

													r = (r * (120 - l) + 255 * l) / 120;
													g = (g * (120 - l) + 255 * l) / 120;
													b = (b * (120 - l) + 255 * l) / 120;
												}else
												{
													r = (r * l) / 120;
													g = (g * l) / 120;
													b = (b * l) / 120;
												}

												return '#' + ToHex(r) + ToHex(g) + ToHex(b);
											}
										</script>
										<table border="0" cellspacing="10" cellpadding="0" style="margin:30px 0 0 30px"><tr><td>
											<table id="Colortable" border="0" cellspacing="0" cellpadding="0" style="cursor:pointer">
												<script >
													function wc(r, g, b, n)
													{
														r = ((r * 16 + r) * 3 * (15 - n) + 0x80 * n) / 15;
														g = ((g * 16 + g) * 3 * (15 - n) + 0x80 * n) / 15;
														b = ((b * 16 + b) * 3 * (15 - n) + 0x80 * n) / 15;

														document.write('<td bgcolor=#' + ToHex(r) + ToHex(g) + ToHex(b) + ' height=8 width=8></td>');
													}

													var cnum = new Array(1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0);

													for(i = 0; i < 16; i ++)
													{
														document.write('<tr>');
														for(j = 0; j < 30; j ++)
														{
															n1 = j % 5;
															n2 = Math.floor(j / 5) * 3;
															n3 = n2 + 3;

															wc((cnum[n3] * n1 + cnum[n2] * (5 - n1)),
																	(cnum[n3 + 1] * n1 + cnum[n2 + 1] * (5 - n1)),
																	(cnum[n3 + 2] * n1 + cnum[n2 + 2] * (5 - n1)), i);
														}

														document.writeln('</tr>');
													}
												</script>
											</table></td><td>
											<table id="Graytable" border="0" cellspacing="0" cellpadding="0" style="cursor:hand;margin:20px">
												<script>
													for(i = 255; i >= 0; i -= 8.5)
														document.write('<tr bgcolor=#' + ToHex(i) + ToHex(i) + ToHex(i) + '><td title=' + Math.floor(i * 16 / 17) + ' height=4 width=20></td></tr>');
												</script>
											</table>
										</td></tr>
										</table>

										<table border="0" cellpadding="0" width="100%" style="margin-left:35px">
											<tr>
												<table id="ShowColor" bgcolor="#fff" border="1" width="285" height="30" cellspacing="0" cellpadding="0" style="margin:0 auto ;background:#fff;display:none">
													<tr><td></td></tr>
												</table>

										</table>
										<div style="margin-top:15px"><button class="cbgnow">应用到当前页</button><button class="cbgall">全部应用</button></div>
									</div>
								</li>
								<li id="Gradientbtn"  class="cncv">
									<span >渐变</span>
									<div class="yb"></div>
									<div id="Gradient" class="bgcontntnt">
										<ul>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb01.jpg" alt="" class="bgimgborder" border="yellow"></li>
											<li ><img src="__PUBLIC__/web_img/LessonPlannings/jb02.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb03.jpg" alt=""></li>
											<li ><img src="__PUBLIC__/web_img/LessonPlannings/jb04.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb05.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb06.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb07.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb08.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb09.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb10.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb11.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb12.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb13.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb14.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb15.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/jb16.png" alt=""></li>
										</ul>
										<div><button class="bgnow">应用到当前页</button><button class="bgall">全部应用</button></div>
									</div>
								</li>
								<li id="texturebtn" class="cncv">
									<span >纹理</span>
									<div class="yb"></div>
									<div id="texture" class="bgcontntnt">
										<ul>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl01.png" alt="" class="bgimgborder" border="yellow"></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl02.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl03.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl04.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl05.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl06.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl07.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl08.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl09.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl10.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl11.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl12.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl13.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl14.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl15.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/wl16.jpg" alt=""></li>
										</ul>
										<div><button class="bgnow">应用到当前页</button><button class="bgall">全部应用</button></div>
									</div>
								</li>
								<li id="picturebtn" class="cncv">
									<span style="border:none" >图片</span>
									<div class="yb"></div>
									<div id="picture" class="bgcontntnt">
										<ul>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp01.png" alt="" class="bgimgborder" border="yellow"></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp02.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp03.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp04.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp05.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp06.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp07.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp08.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp09.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp10.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp11.png" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp12.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp13.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp14.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp15.jpg" alt=""></li>
											<li><img src="__PUBLIC__/web_img/LessonPlannings/tp16.jpg" alt=""></li>
										</ul>
										<div id="fine-uploader-background" style="display:none;"></div>
										<div><label id="uploadfile_background" class="insertedlab" style="font-weight: normal;">插入图片</label><input type="file" id="inserted" style="display:none"><button class="bgnow">应用到当前页</button><button class="bgall">全部应用</button></div>
									</div>
								</li>
							</ul>
						</div>



						<div id="picture"></div>
					</div>
				</div>
				<div style="position:absolute;top: -2;right: -140px;">
					<img src="__PUBLIC__/web_img/LessonPlannings/bag1.gif" alt="" id="cloudsBag" style="width: 44px;margin-bottom: 5px">
					<span>资源收藏夹</span>
				</div>
			</div>

		</div>


		</div>
		<div id="tempDiv" style="" >

		</div>
		<!--         创建教案区-->
		<div id="toolbar-text" class="tool-container">
			<div class="tool-items">
				<div class="btn-format tool-item gradient btn-group">
					<button type="button" class="btn btn-text" data-cmd="P">文本</button>
					<button type="button" class="btn dropdown-toggle" data-toggle="dropdown"> <span class="caret"></span> </button>
					<ul class="dropdown-menu" role="menu">
						<li>
							<button data-cmd="P">文本</button>
						</li>
						<li>
							<button data-cmd="H1">标题 1</button>
						</li>
						<li>
							<button data-cmd="H2">标题 2</button>
						</li>
						<li>
							<button data-cmd="H3">标题 3</button>
						</li>
						<li>
							<button data-cmd="H4">标题 4</button>
						</li>
						<li>
							<button data-cmd="H5">标题 5</button>
						</li>
						<li>
							<button data-cmd="H6">标题 6</button>
						</li>
					</ul>
				</div>
				<button class="btn-bold" title="加粗"><b>B</b></button>
				<button class="btn-italic" title="斜体"><i><b>I</b></i></button>
				<button class="btn-underline" title="下划线"><u><b>U</b></u></button>
				<button class="btn-strike" title="中划线"><strike>S</strike></button>
				<div class="btn-color tool-item gradient" title="字体颜色">
					<input class="color" readonly="readonly" value="A" />
				</div>
				<!--
                <div class="btn-color-back tool-item gradient" title="字体背景">
                    <input class="color" readonly="readonly" value="" autocomplete="off" />
                </div>
-->
				<button class="btn-clear" title="删除格式"><i class="ai-brush"></i></button>
				<div class="btn-font-size tool-item gradient" title="字体大小">
					<input class="font-size" readonly="readonly" value="12" />
					<div class="font-range-wrapper">
						<div class="font-range"></div>
						<button class="btn-font-remove tool-item"><i class="ai-remove"></i></button>
					</div>
				</div>
				<button class="btn-list" title="列表"><i class="ai-list"></i></button>
				<button class="btn-list-order" title="有序列表"><i class="ai-order-list"></i></button>
				<button class="btn-animation tool-item" title="动画效果"><i class="ai-movie"></i> 动画</button>
				<button class="btn-left" title="居左对齐"><i class="ai-align-left"></i></button>
				<button class="btn-center" title="居中对齐"><i class="ai-align-center"></i></button>
				<button class="btn-right" title="居右对齐"><i class="ai-align-right"></i></button>
				<button class="btn-del" title="删除元素"><i class="ai-trash"></i></button>
				<div class="tool-animation">
					<div class="btn-text tool-item" style="width:84px">
						动画效果
					</div>
					<div class="btn-label tool-item tool-animation-css">
						<select>
							<optgroup label="无动画效果">
								<option value="">无动画效果</option>
							</optgroup>
							<optgroup label="进入效果">
								<option value="bounce">bounce</option>
								<option value="flash">flash</option>
								<option value="pulse">pulse</option>
								<option value="rubberBand">rubberBand</option>
								<option value="shake">shake</option>
								<option value="swing">swing</option>
								<option value="tada">tada</option>
								<option value="wobble">wobble</option>
								<option value="jello">jello</option>
							</optgroup>
							<optgroup label="弹跳进入">
								<option value="bounceIn">bounceIn</option>
								<option value="bounceInDown">bounceInDown</option>
								<option value="bounceInLeft">bounceInLeft</option>
								<option value="bounceInRight">bounceInRight</option>
								<option value="bounceInUp">bounceInUp</option>
							</optgroup>
							<optgroup label="弹跳退出">
								<option value="bounceOut">bounceOut</option>
								<option value="bounceOutDown">bounceOutDown</option>
								<option value="bounceOutLeft">bounceOutLeft</option>
								<option value="bounceOutRight">bounceOutRight</option>
								<option value="bounceOutUp">bounceOutUp</option>
							</optgroup>
							<optgroup label="衰减进入">
								<option value="fadeIn">fadeIn</option>
								<option value="fadeInDown">fadeInDown</option>
								<option value="fadeInDownBig">fadeInDownBig</option>
								<option value="fadeInLeft">fadeInLeft</option>
								<option value="fadeInLeftBig">fadeInLeftBig</option>
								<option value="fadeInRight">fadeInRight</option>
								<option value="fadeInRightBig">fadeInRightBig</option>
								<option value="fadeInUp">fadeInUp</option>
								<option value="fadeInUpBig">fadeInUpBig</option>
							</optgroup>
							<optgroup label="衰减退出">
								<option value="fadeOut">fadeOut</option>
								<option value="fadeOutDown">fadeOutDown</option>
								<option value="fadeOutDownBig">fadeOutDownBig</option>
								<option value="fadeOutLeft">fadeOutLeft</option>
								<option value="fadeOutLeftBig">fadeOutLeftBig</option>
								<option value="fadeOutRight">fadeOutRight</option>
								<option value="fadeOutRightBig">fadeOutRightBig</option>
								<option value="fadeOutUp">fadeOutUp</option>
								<option value="fadeOutUpBig">fadeOutUpBig</option>
							</optgroup>
							<optgroup label="螺旋效果">
								<option value="flip">flip</option>
								<option value="flipInX">flipInX</option>
								<option value="flipInY">flipInY</option>
								<option value="flipOutX">flipOutX</option>
								<option value="flipOutY">flipOutY</option>
							</optgroup>
							<optgroup label="光速">
								<option value="lightSpeedIn">lightSpeedIn</option>
								<option value="lightSpeedOut">lightSpeedOut</option>
							</optgroup>
							<optgroup label="旋转进入">
								<option value="spin">匀速旋转</option>
								<option value="rotateIn">rotateIn</option>
								<option value="rotateInDownLeft">rotateInDownLeft</option>
								<option value="rotateInDownRight">rotateInDownRight</option>
								<option value="rotateInUpLeft">rotateInUpLeft</option>
								<option value="rotateInUpRight">rotateInUpRight</option>
							</optgroup>
							<optgroup label="旋转退出">
								<option value="rotateOut">rotateOut</option>
								<option value="rotateOutDownLeft">rotateOutDownLeft</option>
								<option value="rotateOutDownRight">rotateOutDownRight</option>
								<option value="rotateOutUpLeft">rotateOutUpLeft</option>
								<option value="rotateOutUpRight">rotateOutUpRight</option>
							</optgroup>
							<optgroup label="滑入">
								<option value="slideInUp">slideInUp</option>
								<option value="slideInDown">slideInDown</option>
								<option value="slideInLeft">slideInLeft</option>
								<option value="slideInRight">slideInRight</option>
							</optgroup>
							<optgroup label="滑出">
								<option value="slideOutUp">slideOutUp</option>
								<option value="slideOutDown">slideOutDown</option>
								<option value="slideOutLeft">slideOutLeft</option>
								<option value="slideOutRight">slideOutRight</option>
							</optgroup>
							<optgroup label="缩放进入">
								<option value="zoomIn">zoomIn</option>
								<option value="zoomInDown">zoomInDown</option>
								<option value="zoomInLeft">zoomInLeft</option>
								<option value="zoomInRight">zoomInRight</option>
								<option value="zoomInUp">zoomInUp</option>
							</optgroup>
							<optgroup label="缩放退出">
								<option value="zoomOut">zoomOut</option>
								<option value="zoomOutDown">zoomOutDown</option>
								<option value="zoomOutLeft">zoomOutLeft</option>
								<option value="zoomOutRight">zoomOutRight</option>
								<option value="zoomOutUp">zoomOutUp</option>
							</optgroup>
							<optgroup label="特别效果">
								<option value="hinge">hinge</option>
								<option value="rollIn">rollIn</option>
								<option value="rollOut">rollOut</option>
							</optgroup>
						</select>
					</div>
					<div class="btn-label tool-item tool-animation-loop">
						<label>
							<input type="checkbox" class="animation-loop" />循环</label>
					</div>
					<button class="btn-cancel" title="返回"><i class="ai-chevron-left"></i> 返回编辑器</button>
				</div>
			</div>
		</div>
		<div id="tmplCss" class="hide">
			<style></style>
		</div>
		<div id="bgCss" class="hide">
			<style></style>
		</div>
		<div class="wrapper">
			<div class="layout" style="width:1260px;margin:0 auto;overflow:hidden">
				<!-- <div id="addfile" >
					<label id="uploadfile" style=" cursor: pointer;">上传本地文件</label> -->
					<!--<input type="file" id="uploadfile" style="display:none">-->
				<!-- </div> -->
				<div id="fine-uploader" style="display:none;"></div>

				<div class="layout-left">
					<div class="ui-accordion ui-widget ui-helper-reset">
						<div class="design-slides-wrap ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="width:70px;" id="cmd" tabindex="0">

							<div class="design-slides" id="pageabc">

							</div>
							<div class="design-plus">
								<div>
									<i class="ai-plus"></i>
								</div>
							</div>
						</div>
					</div>

				</div>
				<div class="layout-center" style="width:940px">
					<div class="slide-container nor">
						<div class="slide-toolbar">
						</div>
						<div class="slide-wrapper">
							<div class="slide active" id="silderContent" style="margin:0;border:1px dotted #ccc;overflow:hidden;">
								<div id="sliderts">
									<p>教案编辑区域</p>
									<p>仅支持视频，音频，PPT和图片</p>
								</div>
							</div>
						</div>
						<div class="slide-selector"></div>
					</div>
					<div class="slide-preview">
						<div class="preview-left">
							<form class="form-horizontal" data-binding="slideModel">
								<div class="form-group text-center">
									<div id="barcodeUrl"></div>
								</div>
							</form>
						</div>
					</div>
					<div class="editor">
						<textarea id="editor"></textarea>
					</div>
					<div style="text-align:right;padding-top:10px;display:none" id="btnparent">
						<button id="pre_page" title="上一页"  onclick="pre_page()">上一页</button>
						<button id="next_page" title="下一页" onclick="next_page()" style="margin-left:20px">下一页</button>
					</div>
				</div>

				<div class="layout-right">

					<div class="myShortages" id="myfover">
						<p id="fover">我收藏的京版资源</p>
						<span class="searchBox" id="searchBox1" style="display:none;">
								<div class="search">
									<button class="search_btn"></button>
									<input type="text" name="keyword" value="{$keyword}" class="search_text" placeholder="请输入资源名称">
								</div>
								<ul class="classify_ul type_ul">
									<li class="colorRed" {$type==null ? 'class="current_selected"': ''} attr_id='' style="display:none">全部</li>
									<li attr_id='video' {$type=='video' ? 'class="current_selected"': ''}>视频</li>
									<li attr_id='audio' {$type=='audio' ? 'class="current_selected"': ''}>音频</li>
									<li attr_id='image' {$type=='image' ? 'class="current_selected"': ''}>图片</li>
									<li attr_id='ppt' {$type=='ppt' ? 'class="current_selected"': ''}>PPT</li>
									<!--
                                                                        <li attr_id='word' {$type=='word' ? 'class="current_selected"': ''}>WORD</li>
                                                                        <li attr_id='pdf' {$type=='pdf' ? 'class="current_selected"': ''}>PDF</li>
                                                                        <li attr_id='swf' {$type=='swf' ? 'class="current_selected"': ''}>SWF</li>
                                                                        <li attr_id='condensed' {$type=='condensed' ? 'class="current_selected"': ''}>压缩包</li>
                                    -->
								</ul>
							</span>
					</div>
					<div class="myShortages" id="mybjfover">
						<p id="Teachfover">我收藏的教师资源</p>
						<span class="searchBox" id="searchBox2" style="display:none;">
								<div class="search">
									<button class="search_btn"></button>
									<input type="text" name="keyword" value="{$keyword}" class="search_text" placeholder="请输入资源名称">
								</div>
								<ul class="classify_ul type_ul">
									<li class="colorRed" {$type==null ? 'class="current_selected"': ''} attr_id='' style="display:none">全部</li>
									<li attr_id='video' {$type=='video' ? 'class="current_selected"': ''}>视频</li>
									<li attr_id='audio' {$type=='audio' ? 'class="current_selected"': ''}>音频</li>
									<li attr_id='image' {$type=='image' ? 'class="current_selected"': ''}>图片</li>
									<li attr_id='ppt' {$type=='ppt' ? 'class="current_selected"': ''}>PPT</li>
									<!--
                                                                        <li attr_id='word' {$type=='word' ? 'class="current_selected"': ''}>WORD</li>
                                                                        <li attr_id='pdf' {$type=='pdf' ? 'class="current_selected"': ''}>PDF</li>
                                                                        <li attr_id='swf' {$type=='swf' ? 'class="current_selected"': ''}>SWF</li>
                                    -->
								</ul>
							</span>
					</div>
					<div class="design-element-container myShortages" id="myexercises">
						<p id="exercises" >我收藏的习题</p>
						<span class="searchBox" id="searchBox4" style="display:none;">
								<div class="search">
									<button class="search_btn"></button>
									<input type="text" name="keyword" value="{$keyword}" class="search_text" placeholder="请输入习题名称">
								</div>
							</span>
					</div>
					<div class="myShortages" id="mymaterials">
						<p id="materials">我的素材库</p>
						<span class="searchBox" id="searchBox3" style="display:none;">
								<div class="search">
									<button class="search_btn"></button>
									<input type="text" name="keyword" value="{$keyword}" class="search_text" placeholder="请输入素材名称">
								</div>
								<ul class="classify_ul type_ul">
									<li class="colorRed" {$type==null ? 'class="current_selected"': ''} attr_id='' style="display:none">全部</li>
									<li attr_id='video' {$type=='video' ? 'class="current_selected"': ''}>视频</li>
									<li attr_id='audio' {$type=='audio' ? 'class="current_selected"': ''}>音频</li>
									<li attr_id='image' {$type=='image' ? 'class="current_selected"': ''}>图片</li>
									<li attr_id='ppt' {$type=='ppt' ? 'class="current_selected"': ''}>PPT</li>
									<!--
                                                                        <li attr_id='word' {$type=='word' ? 'class="current_selected"': ''}>WORD</li>
                                                                        <li attr_id='pdf' {$type=='pdf' ? 'class="current_selected"': ''}>PDF</li>
                                                                        <li attr_id='swf' {$type=='swf' ? 'class="current_selected"': ''}>SWF</li>
                                    -->
									<!--<li attr_id='condensed' {$type=='condensed' ? 'class="current_selected"': ''}>压缩包</li>-->
								</ul>
							</span>
					</div>
				</div>
			</div>
		</div>
		<div class="text-center" style="background:#fff">
			<button id="baocun">保存</button>
		</div>
		<ul class="dropdown-menu slide-menu" style="display:none">
			<li><a class="btn-del"><i class="ai-trash"></i> 删除当前页面</a></li>
		</ul>
		<ul class="dropdown-menu slide-design-menu" style="display:none">
			<li><a class="btn-copy"><i class="ai-copy"></i> 复制选中元件</a></li>
			<li><a class="btn-paste"><i class="ai-paste"></i> 粘贴所复制元件</a></li>
			<li class="divider"></li>
			<li><a class="btn-del"><i class="ai-trash"></i> 删除选中元件</a></li>
		</ul>
	</div>
	<div class="bottombar">
		<div class="company">
			<p>京ICP备 10009247号-5
				<br>北京出版集团版权所有 Copyright {$Think.const.NOW_TIME|date="Y",###}</p>
		</div>
	</div>
	<div id="tanchuang">
		<div class="row content_left">
			<div class="col-md-12">
				<div class="form_section">
					<label for="name">教案名称</label>
					<div class="input-control text full-size inupt-widths">
						<input type="text" name="name" id="name" class="form-control mb12" placeholder="必填，不超过50字" required maxlength="50" value="{$editInfo.name}">
					</div>
				</div>
			</div>
			<div class="col-md-12">
				<div class="form_section">
					<label for="course_id">关联学科</label>

					<div class="input-control text full-size inupt-widths">
						<select id="course_id" name="course_id" class="form-control mb12" onchange="getTextbooks()" required>
							<option value="">-请选择-</option>
							<volist name="courses" id="dataCourse" empty="暂时没有信息">
								<option value="{$dataCourse.id}" {$dataCourse[ 'id']==$editInfo[ 'course_id']? 'selected': ''}>{$dataCourse.code} : {$dataCourse.course_name}</option>
							</volist>
						</select>
					</div>
				</div>
			</div>
			<div class="col-md-12">
				<div class="form_section">
					<label for="grade_id">关联年级</label>

					<div class="input-control text full-size inupt-widths">
						<select id="grade_id" name="grade_id" class="form-control mb12" onchange="getTextbooks()" required>
							<option value="">-请选择-</option>
							<volist name="grades" id="dataGrade" empty="暂时没有信息">
								<option value="{$dataGrade.id}" {$dataGrade[ 'id']==$editInfo[ 'grade_id']? 'selected': ''}>{$dataGrade.grade}</option>
							</volist>
						</select>
					</div>
				</div>
			</div>
			<div class="col-md-12">
				<div class="form_section">
					<label for="textbook_id">教材分册</label>

					<div class="input-control text full-size inupt-widths">
						<select id="textbook_id" name="textbook_id" class="form-control mb12" required>
							<option value="">-请先选择学科和年级-</option>
							<volist name="textbooks" id="dataTextbook">
								<option value="{$dataTextbook.id}" {$dataTextbook[ 'id']==$editInfo[ 'textbook_id']? 'selected': ''}>{$dataTextbook.name}</option>
							</volist>
						</select>
					</div>
				</div>
			</div>
			<input type="hidden" name="fileList" id="fileListInput" value="{$fileList}">
			<input type="hidden" name="MediaList" id="vid" value="{$vid}">
			<input type="hidden" name="isEdit" value="{$isEdit}">
			<div class="text-center col-md-12" style="margin-top:80px">
				<button type="submit" class="btn btn-primary" id="saveButton" on>确定</button>
			</div>
			<img src="__PUBLIC__/web_img/LessonPlannings/guanbi.png" alt="" style="position:absolute;top:0;right:0" id="close1" title="关闭">
		</div>
	</div>
</div>

<div id="baocuncg" class="text-center">
	<p>
		提示
		<img src="/Public/img/icon/adTitleImg1.png" class="adTitleImg allno guanbi" onclick="xiaoshi(this)">
	</p>
	<div class="" style="position:relative;top:60px;">
		保存成功
	</div>
	<span class="btnall" id="bcyes">确定</span>
</div>
<div id="geshi" class="text-center">
	<p>
		提示
		<img src="/Public/img/icon/adTitleImg1.png" class="adTitleImg allno guanbi" onclick="xiaoshi(this)">
	</p>
	<div class="" style="position:relative;top:60px;">
		仅支持视频、音频、图片、PPT<br>暂不支持此类文件格式
	</div>
	<span class="btnall" id="geshiq" style="margin-top:120px">确定</span>
</div>
<div id="pptwindow" class="text-center">
	<p>
		提示
		<img src="/Public/img/icon/adTitleImg1.png" class="adTitleImg allno guanbi" onclick="xiaoshi(this)">
	</p>
	<div class="" style="position:relative;top:60px;">
		文件正在转换中，请稍后再试！
	</div>
	<span class="btnall" id="pptd" style="margin-top:140px">好的</span>
</div>

<!--	进度条-->
<div id="barbox">
	<!--<div class="progress">
    <div class="barname">素材名称：</div>
    <div class="progress_bar">
    <div class="bar1"></div>
    <span>1%</span>
    </div>
</div>
<div class="progress">
    <div class="barname">素材名称：</div>
    <div class="progress_bar">
    <div class="bar1"></div>
    <span>50%</span>
    </div>
</div>-->
</div>
<div class="loding">

</div>
<!-- 鼠标滑过显示title   -->
<span id="navThumImgTitle1" class="imgTitle">教师分享</span>
<span id="navThumImgTitle3" class="imgTitle">数字教材</span>
<span id="navThumImgTitle2" class="imgTitle">备课系统</span>

<span id="navThumImgTitle4" class="imgTitle">京版资源</span>
<span id="navThumImgTitle5" class="imgTitle">清屏</span>
<!--	<span id="navThumImgTitle6" class="imgTitle">垃圾箱</span>-->
<span id="navThumImgTitle7" class="imgTitle">资源收藏夹</span>
<span id="navThumImgTitle8" class="imgTitle">文本</span>

<div class="notice noticeTeacher">
	<img src="__PUBLIC__/img/notice_close.png" class="notice_close" alt="">
	<p class="helloUser">尊敬的教师用户，您好！</p>
	<p>1、普通用户自注册成功之日起，可在免费的试用期内登录并使用平台提供的全部功能（包括免费功能和付费功能）。</p>
	<p>2、免费试用期过后，普通用户可继续使用平台提供的免费功能，但付费功能将被停用。付费功能包括：</p>
	<p style="text-indent: 48px;">（1）教学+模块：京版资源/备课系统</p>
	<p style="text-indent: 48px;">（2）班级行模块：数字课堂/小黑板/学习轨迹/作业系统/班级信息管理</p>
	<p>3、普通用户申请并通过审核升级为VIP用户后，可继续使用平台提供的付费功能，且试用期的该部分数据将被保留。</p>
	<br>
	<p style="padding-right:40px">注：目前VIP用户分为个人VIP与团体VIP两种，普通用户可以以个人为单位申请升级为个人VIP用户。若需升级为团体VIP用户，请与学校联系，以学校为单位办理VIP业务。VIP业务办理详情请咨询：400-655-3588</p>
</div>

<div id="allremove">
		<p>
			提示
			<img src="/Public/img/icon/adTitleImg1.png" class="adTitleImg allno">
		</p>
		<div class="" style="position:relative;top:60px">
			确定清空当前页面？
		</div>
		<span id="allyes" class="btnall">是</span>
		<span class="btnall allno">否</span>
</div>
<div id="mask"></div>
<div id="mask2"></div>

<!-- 右下角的返回 二维码 分享 -->
<ul class="bottomRightUl">
	<li class="bottomRightShare">
		<div class="bottomRightShareOutter">
			<div class="bdsharebuttonbox">
				<img src="http://jbyoss.oss-cn-beijing.aliyuncs.com/public/web_img/Icons/bottomRightCorner.png" alt="" class="bottomRightCorner">
				<span class="bottomRightSpan">分享到</span>
				<a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
				<a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
				<a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
				<a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
			</div>
		</div>
	</li>
	<li class="bottomRightQRcode">
		<div class="bottomRightQRcodeOutter">
			<div class="bottomRightQRcodeBox">
				<img src="http://jbyoss.oss-cn-beijing.aliyuncs.com/public/web_img/Icons/bottomRightCode.png" alt="" class="bottomRightCode">
				<img src="http://jbyoss.oss-cn-beijing.aliyuncs.com/public/web_img/Icons/bottomRightCorner.png" alt="" class="bottomRightCorner">
			</div>
		</div>
	</li>
	<li class="bottomRightTop"></li>
</ul>

<script src="__PUBLIC__/airView/airView.js"></script>
<script src="__PUBLIC__/js/fine-uploader/fine-uploader.js" type="text/javascript"></script>
<script type="text/template" id="qq-template">
	<div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
		<div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
			<div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
		</div>
		<div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
			<span class="qq-upload-drop-area-text-selector"></span>
		</div>
		<div class="qq-upload-button-selector qq-upload-button">
			<div>上传文件</div>
		</div>
		<span class="qq-drop-processing-selector qq-drop-processing">
                <span>Processing dropped files...</span>
			<span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
			</span>
		<ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
			<li>
				<div class="qq-progress-bar-container-selector">
					<div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
				</div>
				<span class="qq-upload-spinner-selector qq-upload-spinner"></span>
				<img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
				<span class="qq-upload-file-selector qq-upload-file"></span>
				<span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
				<input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
				<span class="qq-upload-size-selector qq-upload-size"></span>
				<button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancel</button>
				<button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>

				<span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
			</li>
		</ul>

		<dialog class="qq-alert-dialog-selector">
			<div class="qq-dialog-message-selector"></div>
			<div class="qq-dialog-buttons">
				<button type="button" class="qq-cancel-button-selector">Close</button>
			</div>
		</dialog>

		<dialog class="qq-confirm-dialog-selector">
			<div class="qq-dialog-message-selector"></div>
			<div class="qq-dialog-buttons">
				<button type="button" class="qq-cancel-button-selector">No</button>
				<button type="button" class="qq-ok-button-selector">Yes</button>
			</div>
		</dialog>

		<dialog class="qq-prompt-dialog-selector">
			<div class="qq-dialog-message-selector"></div>
			<input type="text">
			<div class="qq-dialog-buttons">
				<button type="button" class="qq-cancel-button-selector">Cancel</button>
				<button type="button" class="qq-ok-button-selector">Ok</button>
			</div>
		</dialog>
	</div>
</script>
<script>
	function xiaoshi(obj){
		$(obj).parent().parent().hide();
		$('#mask,#mask2').hide()
	}
	function windowsize(){
		var ww = $('.wrapper').width();

	}
	$('.active').click(function(){
	$('.dropdown-menu').hide()
})
	//	$(function(){
	//	    windowsize();
	//			    var browser=navigator.appName
	//		var b_version=navigator.appVersion
	//		var version=b_version.split(";");
	//		var trim_Version=version[1].replace(/[ ]/g,"");
	//		if(browser=="Microsoft Internet Explorer" && trim_Version=="MSIE9.0") {
	//		$(':file').attr('disabled','disabled')
	//	    $('#addfile,#uploadfile_background').click(function(){
	//			alert("当前浏览器暂不支持该功能，请选择其他浏览器！");
	//
	//			return false;
	//		})
	//	}
	//	})
	window.onresize=function(){
		windowsize()
	}
	var  wh = $('body').height();

	$('#mask,#mask2').height(wh)
	$('.btnall').click(function(){
		$('#mask').hide()
	})
</script>
<script>
	$('.aVip,.imgVip').on('click', function () {
		$('.notice').show();
		$('#xiuxiuEditor').css('margin-left', '-2000px');
		$("#flashPlayer").css('margin-left', '-2000px');
	})
	$('.notice_close').on('click', function () {
		$('.notice').hide();
		$('#xiuxiuEditor').css('margin-left', '0');
		$("#flashPlayer").css('margin-left', '0');
	})
	prefect_role_='{$perfect_role}';
	is_perfect_information_='{$is_perfect_information}';
</script>
<script>
	var progress_div = '<div class="progress">' +
			'<div class="barname" style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;width:125px;">素材名称</div>' +
			'<div style="line-height:50px;">：</div>' +
			'<div class="progress_bar">' +
			'<div class="bar1"></div>' +
			'<span>1%</span>' +
			'</div>' +
			'</div>';
	var idInfo = [];
	var uploadInfo = {};
	var bgstring ;
	var imgstring;
	$("#uploadfile").click(function () {
		imgstring = 'string';
		bgstring = null
		$("#fine-uploader").find(':file').trigger('click');
	});
	$("#uploadfile_background").click(function () {
		imgstring = null;
		bgstring = 'string';
		$("#fine-uploader-background").find(':file').trigger('click');
	});
	uploadfile_background
	var oss_path = 'http://jbyoss.oss-cn-beijing.aliyuncs.com/';

	function updateCircle() {
		var percents = 0,
				current_attr_id = 0;
		$('.progress').each(function (index, el) {
			current_attr_id = $(this).attr('attr_id');
			percents = $('.qq-file-id-' + current_attr_id).find('.qq-progress-bar-selector').attr('aria-valuenow');

			$(this).find('span').last().text(percents + '%');
			$(this).find('.bar1').css('width', percents + '%');
		});
	}

	function changeInputFilter() {
		var acceptStr = $('#type').find("option:selected").attr('extval');
		$(':file').attr('accept', acceptStr);
	}
	changeInputFilter();

	function onFileCheck() {
		if ($('li').hasClass('qq-upload-fail')) {
			alert('有文件上传错误');
			return false;
		}
		return true;
	}

	function in_array(search_value, array) {
		for (var i in array) {
			if (search_value == array[i]) {
				return true;
			}
		}
		return false;
	}

	function getFileBackgroundImage(file_type) {
		var image_array = [];
		switch (file_type) {
			case 'mp4':
				image_array.push('r_video.png');
				image_array.push('b_video.jpg');
				image_array.push('video');
				break;
			case 'mp3':
				image_array.push('r_radio.png');
				image_array.push('b_radio.jpg');
				image_array.push('audio');
				break;
			case 'jpg':
			case 'jpeg':
			case 'png':
				image_array.push('r_image.png');
				image_array.push('b_image.jpg');
				image_array.push('image');
				break;
			case 'swf':
				image_array.push('r_swf.png');
				image_array.push('b_swf.jpg');
				image_array.push('swf');
				break;
			case 'pdf':
				image_array.push('r_pdf.png');
				image_array.push('b_pdf.jpg');
				image_array.push('pdf');
				break;
			case 'doc':
			case 'docx':
				image_array.push('r_word.png');
				image_array.push('b_word.jpg');
				image_array.push('word');
				break;
			case 'ppt':
			case 'pptx':
				image_array.push('r_ppt.png');
				image_array.push('b_ppt.jpg');
				image_array.push('ppt');
				break;
		}
		return image_array;
	}
	allow_type = 2;

	var uploader = new qq.FineUploader({
		debug: false,
		element: document.getElementById('fine-uploader'),
		request1Enable: true,
		callbacks: {
			onProgress: function (id, name, loaded, total, pbNum) {

				if (in_array(id, idInfo) == false) {
					$("#barbox").css('display', 'block')
					idInfo.push(id);
					//这里生成那个div,完成时
					var progress_obj = $(progress_div).clone(true);
					var material_array = name.split('.');
					material_name = material_array[0];
					$(progress_obj).find('.barname').text(material_name);
					$(progress_obj).find('.barname').attr('name', material_name)
					$(progress_obj).find('.barname').attr('fileName', name);
					$(progress_obj).attr('id', 'progress' + id);
					$(progress_obj).attr('attr_id', id);
					var type_arr = getFileBackgroundImage(material_array[material_array.length - 1]);
					$(progress_obj).attr('attr_type', type_arr[2]);
					$('#barbox').append(progress_obj);
				}
				updateCircle();
			}
		},
		request1: {
			endpointnum: 1,
			endpoint: 'http://v.polyv.net/uc/services/rest?method=uploadfile',
			params: {
				'writetoken': '9c538d85-340c-466c-9e35-bb301734eb0d',
				'JSONRPC': '{"title": "这里是标题", "tag": "标签", "desc": "视频文档描述"}'
			},
			fileFilter: Array("mp4", "mp3"),
			inputName: 'Filedata',
		},
		request: {
			endpointnum: 0,
			endpoint: 'index.php?m=Home&c=Teach&a=upload_Material_file',
			params: {},
			inputName: 'file[]',
		},
		deleteFile: {
			enabled: true,
			endpoint: '/uploads'
		},
		retry: {
			enableAuto: true
		},
		onCancel: function (id) {
			delete uploadInfo[id];
		},
		responseCallBack: function (id, specNum, xhr) {
			var result;
			try {
				result = JSON.parse(xhr.responseText);
			} catch (e) {
				alert('上传失败!错误原因' + e);
				return false;
			}
			if (specNum == 0) {
				if (result.code == 0) {
					if (typeof (uploadInfo[id]) == 'undefined') {
						uploadInfo[id] = {};
					}
					uploadInfo[id]['file_path'] = result.res; //tupian
					uploadInfo[id]['video_image'] = result.message_video_image; //如果不是视频这里就是空
					uploadInfo[id]['is_transition'] = result.is_transition; //这里是视频转换状态。
					request();
					return true;
				} else {
					alert(result.msg);
					$("#barbox").css('display', 'none');
					$('#progress' + id).remove();
				}
			} else if (specNum == 1) {
				if (result.error == 0) {
					//alert("上传成功!VID:"+result.data[0].vid);
					//TODO: add result.res to XXX
					if (typeof (uploadInfo[id]) == 'undefined') {
						uploadInfo[id] = {};
					}
					uploadInfo[id]['vid'] = result.data[0].vid;
					uploadInfo[id]['playerwidth'] = result.data[0].playerwidth + '*' + result.data[0].playerheight;
					uploadInfo[id]['duration'] = result.data[0].duration;
					uploadInfo[id]['mp4'] = result.data[0].mp4; //sp yp
					request();
					return true;
				} else {
					alert("上传失败!错误码:" + result.error);
					$('#progress' + id).remove();
				}
			}

			function request() {
				//这里发送请求的操作
				if (typeof (uploadInfo[id]['file_path']) != 'undefined') {

					var data = {};
					var temp_filePath = uploadInfo[id]['file_path'].split('.');
					var fileSuffixes = temp_filePath[1];
					var file_name = $('#progress' + id).find('.barname').attr('fileName')
					data.material_name = $('#progress' + id).find('.barname').attr('name');
					data.file_path = uploadInfo[id]['file_path'];
					data.type = $('#progress' + id).attr('attr_type');
					if (fileSuffixes == 'mp4' || fileSuffixes == 'mp3') {
						if (typeof (uploadInfo[id]['vid']) != 'undefined') {
							data.vid = uploadInfo[id]['vid'];
							if (fileSuffixes == 'mp4') {
								data.vid_fullpath = uploadInfo[id]['mp4'];
								data.vid_image_path = uploadInfo[id]['video_image'];
								data.is_transition = uploadInfo[id]['is_transition'];
							}
							//开始发送请求
							$.ajax({
								type: "post",
								async: false,
								url: "{:U('Teach/addMyterials')}",
								data: data,
								dataType: 'json',
								success: function (msg) {
									if (msg.status == 1) {
										//上传成功
										$('#progress' + id).remove();
										//这里开始写随机生成的位置
										if($('#searchBox3').css('display') =='block'){
											$('#materials').click();
											$('#materials').click();
										}else{

											$('#materials').click();
										}


										//											if ($('#barbox').find('.progress').length) {
										$("#barbox").css('display', 'none')

										if (fileSuffixes == 'mp3') {
											$('#tempDiv').html('');
											$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><p style="height:32px;width:200px" class="design-content content-image"></p><audio src="' + oss_path + uploadInfo[id]['file_path'] + '" type="audio" class="design-content content-image" id="' + msg.id + '" category="mymaterial"  controls onclick="ieplay()"></audio></div>'));
											$('#tempDiv .design-element').each(function (ii, n) {
												var uu = $(n).clone();
												OurJS.Designer.setRunnable(uu);
												OurJS.Designer.setInnerSlideEvent(uu);
												$('.slide-wrapper .active').append(uu);
											})
										} else {

											$('#tempDiv').html('');
											$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><video src="' + oss_path + uploadInfo[id]['file_path'] + '" type="video" class="design-content content-image" id="' + msg.id + '" category="mymaterial"  controls onclick="ieplay()"></video></div>'));
											$('#tempDiv .design-element').each(function (ii, n) {
												var uu = $(n).clone();
												OurJS.Designer.setRunnable(uu);
												OurJS.Designer.setInnerSlideEvent(uu);
												$('.slide-wrapper .active').append(uu);
											})
											$('#tempDiv').html('');
										}
										//											}
									} else {
										//上传失败
										alert(file_name + '上传失败');
										$('#progress' + id).remove();
										//											if ($('#barbox').find('.progress').length) {
										$("#barbox").css('display', 'none')
										//											}
									}
								}
							});
						}
					} else {
						//发送请求
						$.ajax({
							type: "post",
							async: false,
							url: "{:U('Teach/addMyterials')}",
							data: data,
							dataType: 'json',
							success: function (msg) {

								if (msg.status == 1) {
									//上传成功
									$('#progress' + id).remove();
									//这里开始写随机生成的位置
									if($('#searchBox3').css('display') =='block'){
										$('#materials').click();
										$('#materials').click();
									}else{

										$('#materials').click();
									}
									//										if ($('#barbox').find('.progress').length) {
									$("#barbox").css('display', 'none');
									$('#tempDiv').html('');
									$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><img src="' + oss_path + uploadInfo[id]['file_path'] + '" type="image" class="design-content content-image" id="' + msg.id + '" category="mymaterial" ></div>'));
									$('#tempDiv .design-element').each(function (ii, n) {
										var uu = $(n).clone();
										OurJS.Designer.setRunnable(uu);
										OurJS.Designer.setInnerSlideEvent(uu);
										$('.slide-wrapper .active').append(uu);
									})
								} else {
									alert(file_name + '上传失败');
									$('#progress' + id).remove();
									//										if ($('#barbox').find('.progress').length) {
									$("#barbox").css('display', 'none')
									//										}
								}
							}
						});
					}
				}
			}
			return false;
		}
	});
	var uploader_background = new qq.FineUploader({
		debug: false,
		element: document.getElementById('fine-uploader-background'),
		request1Enable: false,
		callbacks: {
			onProgress: function (id, name, loaded, total, pbNum) {
				if (in_array(id, idInfo) == false) {
					$("#barbox").css('display', 'block')
					idInfo.push(id);
					//这里生成那个div,完成时
					var progress_obj = $(progress_div).clone(true);
					var material_array = name.split('.');
					material_name = material_array[0];
					$(progress_obj).find('.barname').text(material_name);
					$(progress_obj).find('.barname').attr('name', material_name)
					$(progress_obj).find('.barname').attr('fileName', name);
					$(progress_obj).attr('id', 'progress' + id);
					$(progress_obj).attr('attr_id', id);
					var type_arr = getFileBackgroundImage(material_array[material_array.length - 1]);
					$(progress_obj).attr('attr_type', type_arr[2]);
					$('#barbox').append(progress_obj);
				}
				updateCircle();
			}
		},

		request: {
			endpointnum: 0,
			endpoint: 'index.php?m=Home&c=Teach&a=upload_Material_file',
			params: {},
			inputName: 'file[]',
		},
		deleteFile: {
			enabled: true,
			endpoint: '/uploads'
		},
		retry: {
			enableAuto: true
		},
		onCancel: function (id) {
			delete uploadInfo[id];
		},
		responseCallBack: function (id, specNum, xhr) {
			var result;
			try {
				result = JSON.parse(xhr.responseText);
			} catch (e) {
				alert('上传失败!错误原因' + e);
				return false;
			}
			if (specNum == 0) {
				if (result.code == 0) {
					if (typeof (uploadInfo[id]) == 'undefined') {
						uploadInfo[id] = {};
					}
					uploadInfo[id]['file_path'] = result.res; //tupian
					uploadInfo[id]['video_image'] = result.message_video_image; //如果不是视频这里就是空
					uploadInfo[id]['is_transition'] = result.is_transition; //这里是视频转换状态。

					request();
					return true;
				} else {
					alert(result.msg);
					$("#barbox").css('display', 'none');
					$('#progress' + id).remove();
				}
			} else if (specNum == 1) {
				if (result.error == 0) {
					//alert("上传成功!VID:"+result.data[0].vid);
					//TODO: add result.res to XXX
					if (typeof (uploadInfo[id]) == 'undefined') {
						uploadInfo[id] = {};
					}
					uploadInfo[id]['vid'] = result.data[0].vid;
					uploadInfo[id]['playerwidth'] = result.data[0].playerwidth + '*' + result.data[0].playerheight;
					uploadInfo[id]['duration'] = result.data[0].duration;
					uploadInfo[id]['mp4'] = result.data[0].mp4; //sp yp
					request();
					return true;
				} else {
					alert("上传失败!错误码:" + result.error);
					$('#progress' + id).remove();
				}
			}

			function request() {
				//这里发送请求的操作
				if (typeof (uploadInfo[id]['file_path']) != 'undefined') {

					var data = {};
					var temp_filePath = uploadInfo[id]['file_path'].split('.');
					var fileSuffixes = temp_filePath[1];
					var file_name = $('#progress' + id).find('.barname').attr('fileName')
					data.material_name = $('#progress' + id).find('.barname').attr('name');
					data.file_path = uploadInfo[id]['file_path'];
					data.type = $('#progress' + id).attr('attr_type');
					if (fileSuffixes == 'mp4' || fileSuffixes == 'mp3') {
						if (typeof (uploadInfo[id]['vid']) != 'undefined') {
							data.vid = uploadInfo[id]['vid'];
							if (fileSuffixes == 'mp4') {
								data.vid_fullpath = uploadInfo[id]['mp4'];
								data.vid_image_path = uploadInfo[id]['video_image'];
								data.is_transition = uploadInfo[id]['is_transition'];
							}
							//开始发送请求
							$.ajax({
								type: "post",
								async: false,
								url: "{:U('Teach/addMyterials')}",
								data: data,
								dataType: 'json',
								success: function (msg) {
									if (msg.status == 1) {
										//上传成功
										$('#progress' + id).remove();
										//这里开始写随机生成的位置
										if($('#searchBox3').css('display') =='block'){
											$('#materials').click();
											$('#materials').click();
										}else{

											$('#materials').click();
										}
										//											if ($('#barbox').find('.progress').length) {
										$("#barbox").css('display', 'none')

										if (fileSuffixes == 'mp3') {
											$('#tempDiv').html('');
											$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><p style="height:32px;width:200px" class="design-content content-image"></p><audio src="' + oss_path + uploadInfo[id]['file_path'] + '" type="audio" class="design-content content-image" id="' + msg.id + '" category="mymaterial"  controls onclick="ieplay()"></audio></div>'));
											$('#tempDiv .design-element').each(function (ii, n) {
												var uu = $(n).clone();
												OurJS.Designer.setRunnable(uu);
												OurJS.Designer.setInnerSlideEvent(uu);
												$('.slide-wrapper .active').append(uu);
											})
										} else {

											$('#tempDiv').html('');
											$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><video src="' + oss_path + uploadInfo[id]['file_path'] + '" type="video" class="design-content content-image" id="' + msg.id + '" category="mymaterial"  controls onclick="ieplay()"></video></div>'));
											$('#tempDiv .design-element').each(function (ii, n) {
												var uu = $(n).clone();
												OurJS.Designer.setRunnable(uu);
												OurJS.Designer.setInnerSlideEvent(uu);
												$('.slide-wrapper .active').append(uu);
											})
											$('#tempDiv').html('');
										}
										//											}
									} else {
										//上传失败
										alert(file_name + '上传失败');
										$('#progress' + id).remove();
										//											if ($('#barbox').find('.progress').length) {
										$("#barbox").css('display', 'none')
										//											}
									}
								}
							});
						}
					} else {
						//发送请求
						$.ajax({
							type: "post",
							async: false,
							url: "{:U('Teach/addMyterials')}",
							data: data,
							dataType: 'json',
							success: function (msg) {

								if (msg.status == 1) {
									//上传成功
									$('#progress' + id).remove();
									//这里开始写随机生成的位置
									if($('#searchBox3').css('display') =='block'){
										$('#materials').click();
										$('#materials').click();
									}else{

										$('#materials').click();
									}
									//										if ($('#barbox').find('.progress').length) {
									$("#barbox").css('display', 'none');
									// ADD background here
									if(bgstring == "string" ||imgstring == 'null'){
										if($('#setbg').css('display') == 'none'){
											$('#setbg').show();
											bt++;
											$('#picturebtn').children('span').css('background','rgb(216, 162, 9)')
											$('#picture').show();
										}
										$('.slide-wrapper .active').find('#yulan').remove();
										$('.slide-wrapper .active').append('<div id="yulan" style="width:100%;height:100%;background:url('+oss_path+uploadInfo[id]['file_path']+') no-repeat;position:absolute;top:0;width:100%;height:100%;z-index:-20;background-size:100% 100%"></div>')
										$(this).addClass('bgimgborder');
										$(this).attr('border','yellow');
										$('#picture').find('img').removeClass('bgimgborder').removeAttr('border')
										$('#picture ul').append('<li style="display:none"><img class="bgimgborder" src="'+ oss_path+uploadInfo[id]['file_path'] + '"></li>');
										$('#tempDiv').html('');
									}
									else if(bgstring == 'null'||imgstring == 'string'){

										$('#tempDiv').html('');

										var fileType = oss_path + uploadInfo[id]['file_path'];
										if(fileType.indexOf('.docx') == -1 && fileType.indexOf('.ppt') == -1 && fileType.indexOf('.pdf') == -1){
											$('#tempDiv').append(('<div class="design-element ui-draggable ui-draggable-handle current ui-draggable-dragging ui-resizable" style="position:absolute;top:0;left:0"><img src="' + oss_path + uploadInfo[id]['file_path'] + '" type="image" class="design-content content-image" id="' + msg.id + '" category="mymaterial" ></div>'));
										}
										$('#tempDiv .design-element').each(function (ii, n) {
											var uu = $(n).clone();
											OurJS.Designer.setRunnable(uu);
											OurJS.Designer.setInnerSlideEvent(uu);
											$('.slide-wrapper .active').append(uu);
										})
										$('#tempDiv').html('');
									}
								} else {
									alert(file_name + '上传失败');
									$('#progress' + id).remove();
									//										if ($('#barbox').find('.progress').length) {
									$("#barbox").css('display', 'none')
									//										}
								}
							}
						});
					}
				}
			}
			return false;
		}
	});
</script>

<script>
	var url = window.location.href;
	var n = url.indexOf("?");
	var url_sub = url.substr(n);
	var sp_arr = url_sub.split("&");
	var ids = sp_arr.pop();
	var q = ids.split('=')[1];
	var t = 0;
	$('#bcyes').click(function () {
		$('#baocuncg').hide()
		window.location.href = "{:U('Teach/myLessonPlannings')}";
	})
	$('#baocuncg').find('img').click(function(){
		$('#baocuncg').hide()
		window.location.href = "{:U('Teach/myLessonPlannings')}";
	})
	$('#geshiq').click(function () {
		$('#geshi').hide()
	})
	$('#pptd').click(function () {
		$('#pptwindow').hide();
		$('#mask').hide()
	})
	var clickNum1 = 0;
	var clickNum2 = 0;
	var clickNum3 = 0;
	var clickNum4 = 0;
	// $('#cloudsBag').click(function (e) {


		var e = e || window.event
		// $('.myShortages').toggle();
		$('#fover,#Teachfover,#materials,#exercises').unbind('click');

		//我收藏的京版资源
		$('#fover').click(function () {
			$('#searchBox1').find('.classify_ul').children('li').eq(0).addClass('colorRed').siblings().removeClass('colorRed')
			$(this).siblings('div').remove();
			$('#searchBox1').toggle();
			if (clickNum1 == 1) {
				clickNum1 = 0;
				$('#fover').removeClass('minusp2');
				$('#fover').siblings('span').hide()
				return;
			}
			clickNum1 = 1;
			$('#fover').addClass('minusp2');
			$('#fover').siblings('span').show()
			//						$(this).parent().siblings().children('span,div').hide();
			//						$(this).parent().siblings().children('p').removeClass('minusp2');
			$.ajax({
				type: 'GET',
				url: '/index.php?m=Home&c=LessonPlanning&a=getMyCollectedbjResourceList',
				dataType: 'json',
				success: function (msg) {
					bjResourceList = msg;
					showBjResourceList(msg);
					myppttitle()
				}
			});
		})
		//			我收藏的教师资源
		$('#Teachfover').click(function () {
			$('#searchBox2').find('.classify_ul').children('li').eq(0).addClass('colorRed').siblings().removeClass('colorRed')
			$(this).siblings('div').remove();
			$('#searchBox2').toggle();
			if (clickNum2 == 1) {
				clickNum2 = 0;
				$('#Teachfover').removeClass('minusp2');
				$('#Teachfover').siblings('span').hide();
				return;
			}
			clickNum2 = 1;
			$('#Teachfover').addClass('minusp2');
			$('#Teachfover').siblings('span').show();
			$.ajax({
				type: 'GET',
				url: '/index.php?m=Home&c=LessonPlanning&a=getMyCollectedResourceList',
				dataType: 'json',
				success: function (msg) {
					resourceList = msg;
					showResourceList(msg);
					teacherppttitle()
				}
			})
		});
		//我收藏的习题
		$('#exercises').click(function(){
			$('.search_text').val('');
			if (clickNum4 == 1) {
				clickNum4 = 0;
				$('#exercises').removeClass('minusp2');
				if(typeof($('.workname')) == 'object' && $('.workname').length > 0){
					if($('#searchBox4').is(':hidden')){
						$('.workname').show();

					}else{
						$('.workname,#searchBox4').hide();
					}
				}
				return;
			}
			clickNum4 =1;

			$('#exercises').addClass('minusp2');
			$.ajax({
				type: 'GET',
				url: '/index.php?m=Home&c=LessonPlanning&a=getMyCollectExercise',
				dataType: 'json',
				success: function (msg) {

					if(msg.msg.length == '0'){
						$('#searchBox4').hide()
					}else{
						$('#searchBox4').show();
					}
					exerciseslist(msg)
				}
			})
		})
		//我上传的素材
		$('#materials').click(function () {
			$('#searchBox3').find('.classify_ul').children('li').eq(0).addClass('colorRed').siblings().removeClass('colorRed')
			$(this).siblings('div').remove();
			$('#searchBox3').toggle();
			if (clickNum3 == 1) {
				clickNum3 = 0;
				$('#materials').removeClass('minusp2');
				$('#materials').siblings('span').hide();
				return;
			}
			clickNum3 = 1;
			$('#materials').addClass('minusp2');
			$('#materials').siblings('span').show();
			//					$(this).parent().siblings().children('span,div').hide();
			//					$(this).parent().siblings().children('p').removeClass('minusp2');
			$.ajax({
				type: 'GET',
				url: '/index.php?m=Home&c=LessonPlanning&a=getMyMaterial',
				dataType: 'json',
				success: function (msg) {
					myMaterialList = msg;
					showMyMaterialList(msg);
					meppttitle()
				}
			});
		})
	// })
	//提交
	$('#close1').click(function () {
		$('#tanchuang').hide();
		$('.PPTbg').removeClass('design-element')

	})
	$('#close1').hover(function(){
		$(this).attr('src','__PUBLIC__/web_img/LessonPlannings/guanbi2.png');
	},function(){
		$(this).attr('src','__PUBLIC__/web_img/LessonPlannings/guanbi.png');
	})
	$('#baocun').click(function () {
		$('.slide-wrapper').find('.PPTbg').addClass('design-element')
		$('#tanchuang').show();
		$('#sliderts').remove();
		$('.slide-wrapper').find('.exerciseWrapper').addClass('design-content');
	})
	$('.layout-left').click(function(){
		$('.slide').find('.exerciseWrapper').addClass('design-content');
	});

	$('#saveButton').click(function () {
		var url = window.location.href;
		var lessonArrzy = new Array();
		var lessonName = $('#name').val();
		var subject = $('#course_id').val();
		var grade = $('#grade_id').val();
		var textbook = $('#textbook_id').val();
		if (lessonName == '' || subject == '' || grade == '' || textbook == '') {
			alert('请填写教案的信息！')
			return false
		}
		for (i = 0; i < $('.slide').length; i++) {
			lessonArrzy.push($($('.slide')[i]).html())
		}
		if (n >= 0) {
			$('#saveButton').attr('disabled',true);
			if (sp_arr.length == 2) {
				//新创建的教案保存
				$.ajax({
					type: 'POST',
					url: '/index.php?m=Home&c=LessonPlanning&a=submitLessonPlanning',
					datatype: 'json',
					data: {
						'name': lessonName,
						'course_id': subject,
						'grade_id': grade,
						'textbook_id': textbook,
						'content': lessonArrzy
					},
					success: function (code) {
						if (code.code == '0') {
							$('#tanchuang').hide();
							$('#baocuncg').show();
							$('#mask').show()
							$(window).unbind('beforeunload');
						} else if (code.code == '-1') {
							alert('教案保存失败，请重试！');
							$('#saveButton').attr('disabled',false);
						}
					}
				})
			} else if (sp_arr.length > 2) {
				//修改之前的教案保存
				$.ajax({
					type: 'POST',
					url: '/index.php?m=Home&c=LessonPlanning&a=submitLessonPlanning&id=' + q,
					datatype: 'json',
					data: {
						'name': lessonName,
						'course_id': subject,
						'grade_id': grade,
						'textbook_id': textbook,
						'content': lessonArrzy
					},
					success: function (code) {
						if (code.code == '0') {
							$('#tanchuang').hide();
							$('#baocuncg').show();
								$('#mask').show()
							$(window).unbind('beforeunload');
						} else if (code.code == '-1') {
							alert('教案保存失败，请重试！');
							$('#saveButton').attr('disabled',false);
						}
					}
				})
			}

		}
	})
	//修改教案
	$(function() {
		var url = window.location.href;
		var n = url.indexOf("?");
		var url_sub = url.substr(n);
		var sp_arr = url_sub.split("&");
		if (url.indexOf('&id=')!=-1) {
			$.ajax({
				type: 'GET',
				url: 'index.php?m=Home&c=LessonPlanning&a=getLessonPlanning' + '&id=' + q,
				datatype: 'json',
				success: function (msg) {
					$('#sliderts').hide()
					for (var i = 0; i < msg.msg.length; i++) {
						if (i != 0)
							$('.ai-plus').click()
						var b = i + 1;
						$('#cmd').attr('tabindex', b);
						$('#tempDiv').html('');
						$('#tempDiv').append(msg.msg[i].content);
						$('#tempDiv .design-element').each(function (ii, n) {
							var uu = $(n).clone();
							OurJS.Designer.setRunnable(uu);
							OurJS.Designer.setInnerSlideEvent(uu);
							$('.slide').eq(i).append(uu);
						});
					}
					$('#next_page').show();
					$('#pre_page').hide()
					if (msg.msg.length != 1) {
						$('#pageabc').children().eq(0).addClass('active');
						$('#pageabc').children().last().removeClass('active');
						$('.slide').eq(0).addClass('active');
						$('#sliderts').remove()
						$('.slide').last().removeClass('active');
					}
					$(".design-element-container .design-element").draggable({
						appendTo: ".slide-wrapper .slide.active",
						helper: "clone",
					});
					$('.slide-wrapper').find('.PPTbg').removeClass('design-element')
					$('#tempDiv').html('');
					Allbg = $('.slide-wrapper .slide').eq(0).find('.bgpptsrc').attr('lessonbg');

					Allcbg = $('.slide-wrapper .slide').eq(0).find('.cpptsrc').attr('lessonbg');

				}
			})
		}

		windowsize();
		var browser=navigator.appName
		var b_version=navigator.appVersion
		var version=b_version.split(";");
		var trim_Version=version[1].replace(/[ ]/g,"");
		if(browser=="Microsoft Internet Explorer" && trim_Version=="MSIE9.0") {
			$(':file').attr('disabled','disabled')
			$('#addfile,#uploadfile_background').click(function(){
				alert("当前浏览器暂不支持该功能，请选择其他浏览器！");

				return false;
			})
		}
	})
</script>
<script src="__PUBLIC__/js/external/jquery-ui-1.10.1.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/external/modernizr.min.js" type="text/javascript"></script>
<script src="__PUBLIC_THEME__/javascripts/application-985b892b.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/bootstrap-notify.js" type="text/javascript"></script>
<script src="__PUBLIC__/createLesson/js/render.js?v=3" type="text/javascript"></script>


<!--[if lt IE 9]>
<script src="__PUBLIC__/js/external/html5shiv.min.js"></script>
<script src="__PUBLIC__/js/external/respond.min.js"></script>

<![endif]-->
<script>
	function clickslide(){
		var e ;
		clearTimeout(e)
		e = setTimeout(function(){
			$('.slide').click();
		},5000)
	}


	$('.slide-wrapper .active').click(function(){
		var f = new Array()
	});
	//vip划过提示
	$('#slide_title').hover(function () {
		$('#data_bg').slideDown('100')
	}, function () {
		$('#data_bg').slideUp()
	})
	function showHide(img_, span_) {
		var navImg = document.getElementById(img_);
		var navSpan = document.getElementById(span_);
		navImg.onmouseover = function (event) {
			event = event || window.event;
			var e = event || window.event;
			var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			var x = e.pageX || e.clientX + scrollX;
			var y = e.pageY || e.clientY + scrollY;
			var a = x + 10 + 'px';
			var v = y + 5 + 'px';
			navSpan.style.top = v;
			navSpan.style.left = a;
			navSpan.style.display = 'block';
		}
		navImg.onmouseleave = function (event) {
			navSpan.style.display = 'none'
		}
	}
	//背景图片
	var bt = 1;
	var lessonbg;
	var Allbg
	var Allcbg
	$('#Colortable').find('td').click(function(){
		var c = $(this).attr('bgcolor');
		$('#ShowColor').attr('bgcolor',c);
		$('#ShowColor').css('background',c);
		$('.slide-wrapper .active').find('#yulan').remove() ;
		$('.slide-wrapper .active').append('<div id="yulan" style="background:'+c+' no-repeat;position:absolute;top:0;width:940px;height:610px;z-index:-20"></div>')

	})
	$('#Graytable').find('tr').click(function(){
		var c = $(this).attr('bgcolor');
		$('#ShowColor').attr('bgcolor',c);
		$('#ShowColor').css('background',c);
		$('.slide-wrapper .active').find('#yulan').remove() ;
		$('.slide-wrapper .active').append('<div id="yulan" style="background:'+c+' no-repeat;position:absolute;top:0;width:940px;height:610px;z-index:-20"></div>')
	})
	$('.cbgnow').click(function(){

		var a =  $(this).parent().siblings('#ShowColor').attr('bgcolor');
		$('.slide-wrapper .active').find('.PPTbg').remove()
		if(a == '#fff' ||a == '#FFFFFF'){
			$('.slide-wrapper .active').find('.PPTbg').remove();
			bt++;
			$('#setbg').hide();
			return
		}
		$('.slide-wrapper .active').append('<div style="width:100%;height:100%;background:'+a+' no-repeat;position:absolute;top:0;left:0;z-index:-66" class="PPTbg"></div>');
		bt++;
		$('#setbg').hide();
	})
	$('.cbgall').click(function(){
		var a =  $(this).parent().siblings('#ShowColor').attr('bgcolor');
		$('.slide-wrapper .slide').find('.PPTbg').remove();
		$('#pptsrc').remove();
		$('.cpptsrc').remove();
		if(a == '#fff'||a == '#FFFFFF'){
			$('.slide-wrapper .slide').find('.PPTbg').remove();
			bt++;
			$('#setbg').hide();
			Allcbg = a;
			Allbg = null;
			return
		}
		$('.slide-wrapper .slide').append('<div style="width:100%;height:100%;background:'+a+' no-repeat;position:absolute;top:0;left:0;z-index:-66" class="PPTbg"></div>')
		$('.slide-wrapper .slide').eq(0).append('<div lessonbg = "'+a+'" style="width:100px;height:100px;position:absolute;top:0;display:none" class="design-element cpptsrc" id="pptsrc"></div>');//第一页存的颜色色值DIV
		bt++;
		lessonbg= a ;
		$('#setbg').hide();
		Allcbg = a;
		Allbg = null;

	})

	$('#bkg,#setback').click(function(){
		bt++;

		if(bt%2 == 0){
			$('#setbg').show();
			$('#ccolor').css('background','#d8a209');
			$('#Scolor').show();
			$('.bgcontntnt').find('img').first().addClass('bgimgborder').attr('border');
			$('.bgcontntnt').find('img').eq(16).addClass('bgimgborder').attr('border');
			$('.bgcontntnt').find('img').eq(32).addClass('bgimgborder').attr('border');
		}else{
			$('#setbg').hide();
			$('.cncv').children('span').css('background','#fff');
			$('.bgcontntnt').find('img').removeClass('bgimgborder').removeAttr('border');
			$('.bgcontntnt').hide();

			$('.slide-wrapper .active').find('#yulan').remove()
		}
	})
	$('#wenben').mousedown(function(){

		if(bt%2 == 0){
			bt++;
		}
		$('#setbg').hide();
	})

	$('.slide-wrapper,.layout-left,#wenben,#removesilder,.layout-right').click(function(){
		if(bt%2 == 0){
			bt++;
		}
		$('#setbg').hide();
		$('.slide-wrapper .active').find('#yulan').remove();
		$('.cncv').children('span').css('background','#fff');
		$('.bgcontntnt').find('img').removeClass('bgimgborder').removeAttr('border');
		$('.bgcontntnt').hide()

	})
	$('.cncv').hover(function(){
		$(this).children('.bgcontntnt').show();
		$(this).children('span').css('background','#d8a209');
		$(this).siblings().find('span').css('background','#fff');
		$(this).siblings().find('.bgcontntnt').hide()

	},function(){
	})
	$('.bgcontntnt').find('img').click(function(){
		$('.slide-wrapper .active').find('#yulan').remove();
		var s = $(this).attr('src');
		$('.slide-wrapper .active').append('<div id="yulan" style="background:url('+s+') no-repeat;position:absolute;top:0;width:100%;height:100%;z-index:-20"></div>')
		$(this).addClass('bgimgborder');
		$(this).attr('border','yellow');
		$(this).parent().siblings().children('img').removeClass('bgimgborder').removeAttr('border')
	})
	$('.bgnow').click(function(){
		$('.slide-wrapper .active').find('.PPTbg').remove()
		var d =$(this).parent().siblings().find('.bgimgborder').attr('src');
		$('.slide-wrapper .active').append('<div style="width:100%;height:100%;background:url('+d+') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg"></div>');
		bt++;
		$('#setbg').hide();
	})
	$('.bgall').click(function(){
		$('.slide-wrapper .slide').find('.PPTbg').remove()
		$('#pptsrc').remove();
		$('.bgpptsrc').remove();
		var c =$(this).parent().siblings().find('.bgimgborder').attr('src');
		lessonbg =  c
		$('.slide-wrapper .slide').append('<div style="width:100%;height:100%;background:url('+c+') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg"></div>');
		$('.slide-wrapper .slide').eq(0).append('<div lessonbg = "'+c+'" style="width:100px;height:100px;position:absolute;top:0;display:none" class="design-element bgpptsrc" id="pptsrc"></div>');//第一页存的全部背景图图片地址
		bt++;
		$('#setbg').hide();
		Allbg = c;
		Allcbg = null;
	})
	$('.design-plus').click(function(){
		var u  = window.location.href;
		var n = u.indexOf("?");
		var url_sub = u.substr(n);
		var sp_arr = url_sub.split("&");
		if(sp_arr.length>3){
			var f =  $('.slide-wrapper .slide').eq(0).find('#pptsrc').attr('lessonbg');

			$('.slide-wrapper .active').append('<div style="width:100%;height:100%;background:url('+f+') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element"></div><div style="width:100%;height:100%;background:'+f+' no-repeat;position:absolute;top:0;left:0;z-index:-66" class="PPTbg design-element"></div>')
		}
		else if(lessonbg != undefined ){

			$('.slide-wrapper .active').append('<div style="width:100%;height:100%;background-image:url('+lessonbg+') ;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%;background-color:'+lessonbg+'" class="PPTbg"></div>')
		}
	})

	$('#setback,#bkg').hover(function(){
		$('#bkg').css({
			'background': 'url(__PUBLIC__/web_img/LessonPlannings/bj.png) no-repeat',
			'left':' 40%',
			'box-shadow':' none'
		})
	},function(){
		$('#bkg').css({
			'background': 'url(__PUBLIC__/web_img/LessonPlannings/beij.png) no-repeat',
			'left':' 40%',
			'box-shadow':' none'
		})
	})
</script>
<script>

	/*清屏*/
	$('#removesilder').click(function () {
		$('#allremove').show()
		$('#mask').show()
	})
	$('#allyes').click(function () {
		var a = $('.PPTbg').length
		if(a >0 ){
			if(($('.active').children('#tempDiv').length>0)){
				$('.active').children('#tempDiv').children().remove().end().siblings().remove()
			}
			else{
				$('.slide-wrapper .active').find('.PPTbg').siblings().remove();
			}
			$('#allremove').hide()
			$('#mask').hide()
		}else{
			if($('.active').children('#tempDiv').length>0){
				$('.active').children('#tempDiv').children().remove().end().siblings().remove()
			}else{
				$('.active').children().remove();
			}
			$('#allremove').hide();
			$('#mask').hide()
		}
	})

	$('.allno').click(function () {
		$('#allremove').hide()
		$('#mask').hide()
	})
	$('.slide-wrapper').mouseup(function () {
		$('#sliderts').remove()
	})
	/*云袋*/
</script>
<script>
	showHide('navThumImg1', 'navThumImgTitle1');
	showHide('navThumImg2', 'navThumImgTitle2');
	showHide('navThumImg3', 'navThumImgTitle3');
	showHide('navThumImg4', 'navThumImgTitle4');
	showHide('cloudsBag', 'navThumImgTitle7');

</script>

<!--filter keyword and category-->
<script>
	var bjResourceList, resourceList, myMaterialList;

	function filterResource(msg, type, keyword) {
		var tempmsg = $.extend(true, {}, msg);
		for (var i = 0; i < tempmsg.msg.length; i++) {
			if (tempmsg.msg[i].name.indexOf(keyword) == -1 || (type != '' && type != tempmsg.msg[i].type)) {
				tempmsg.msg.splice(i, 1);
				i--;
			}
		}
		return tempmsg;
	}
	$('.classify_ul li,.search_btn').click(function () {
		var type, keyword;
		var newList;
		var searchBox = $(this).parent().parent().attr('id');
		var objTagName = $(this)[0].tagName.toLowerCase();
		if ("li" == objTagName) {
			$(this).siblings().removeClass('colorRed');
			$(this).addClass('colorRed');
			type = $(this).attr('attr_id');
		} else {
			type = $('#' + searchBox + ' ul .colorRed').attr('attr_id');
		}
		keyword = $('#' + searchBox + ' .search_text').val();
		switch (searchBox) {
			case 'searchBox1':
				newList = filterResource(bjResourceList, type, keyword);
				showBjResourceList(newList);
				myppttitle()
				break;
			case 'searchBox2':
				newList = filterResource(resourceList, type, keyword);
				showResourceList(newList);
				teacherppttitle()
				break;
			case 'searchBox3':
				newList = filterResource(myMaterialList, type, keyword);
				showMyMaterialList(newList);
				meppttitle()
				break;
		}
	});
	$("#searchBox1 .search_text").keydown(function (evt) {
		if (event.keyCode == "13") { //keyCode=13是回车键
			$('#searchBox1 .search_btn').click();
		}
	})
	$("#searchBox2 .search_text").keydown(function (evt) {
		if (event.keyCode == "13") { //keyCode=13是回车键
			$('#searchBox2 .search_btn').click();
		}
	})
	$("#searchBox3 .search_text").keydown(function (evt) {
		if (event.keyCode == "13") { //keyCode=13是回车键
			$('#searchBox3 .search_btn').click();
		}
	})
	$("#searchBox4 .search_text").keydown(function (evt) {
		if (event.keyCode == "13") { //keyCode=13是回车键
			$('#searchBox4 .search_btn').click();
		}
	})
	function showBjResourceList(msg) {
		$('#fover').siblings('div').remove();
		var imgSrc;
		var wg;
		var favorCont = $('<div class="design-element-container"></div>')
		for (var i = 0; i < msg.msg.length; i++) {
			var mybox = $('<div class="design-element-container design-element-container2"><p>' + msg.msg[i].name + '</p></div>')
			favorCont.append(mybox)
			var abc = typeof (msg.msg[i].child)

			if (abc == 'object') {

				for (var k = 0; k < msg.msg[i].child.length; k++) {

					switch (msg.msg[i].child[k].type) {
						case 'image':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png'
							break;
						case 'video':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
							break;
						case 'ppt':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png'
							break;
						case 'audio':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
							break;
						case 'word':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
							break;
						case 'pdf':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
							break;
						case 'swf':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
							break;
						case 'condensed':
							imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
							break;
					}

							mybox.append('<div class="design-element tmpl ui-draggable ui-draggable-handle current asd" style="min-width:240px"><div id="' + msg.msg[i].id + '"class="design-content content-image ppttitle" style="color:#666" data-type=' + msg.msg[i].child[k].type + ' data-src=' + msg.msg[i].oss_path + msg.msg[i].child[k].resource_path + ' title="' + msg.msg[i].child[k].file_name + '" title1="' + msg.msg[i].child[k].file_name + '" data-child="' + msg.msg[i].child[k].resource_path + '"  oss-path="' + msg.msg[i].oss_path + '" data-category ="' + msg.msg[i].category + '" contactid="' + msg.msg[i].child[k].contactid + '" is=' + msg.msg[i].child[k].is_transition + '><img src="' + imgSrc + '" style="margin-right:5px" class="hideis"><span class="hideis">' + msg.msg[i].child[k].file_name + '</span></div></div>')


				}
			} else {
				switch (msg.msg[i].child[k].type) {
					case 'image':
						imgSrc = '__Public__/web_img/LessonPlannings/image.png '
						break;
					case 'video':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
						break;
					case 'ppt':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png'
						break;
					case 'audio':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
						break;
					case 'word':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
						break;
					case 'pdf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
						break;
					case 'swf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
						break;
					case 'condensed':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
						break;
				}
				mybox.append('<div class="design-element tmpl ui-draggable ui-draggable-handle current" style="min-width:240px">   <div id=' + msg.msg[i].id + '   class="design-content content-image ppttitle" style="color:#666" data-type=' + msg.msg[i].type + ' data-src=' + msg.msg[i].vid_fullpath + ' title1="' + msg.msg[i].name + '" title= "' + msg.msg[i].name + '"data-category ="' + msg.msg[i].category + '"><img src="' + imgSrc + '" style="margin-right:5px" class="hideis"><span class="hideis">' + msg.msg[i].name + '</span></div></div>')
			}

		}
		$('#myfover').append(favorCont)
		$('#myfover .design-element-container2').children('div').hide();
		$('#myfover .design-element-container2').children('p').mousedown(function () {
			$(this).siblings('div').toggle();
			if ($(this).siblings('div').css('display') == 'block') {
				$(this).addClass('minusp1');
			} else {
				$(this).removeClass('minusp1')
			}
		})
		//京版
//			var delaytime;
		var dtb = false;
		var delaytime1;

		function mousdownidex() {

			$('#myfover  .design-content').mousedown(function () {
				$('#setbg').hide();
				bt+2;
				$(this).css('min-width', '240px');
				$(this).html('');
				var that = $(this);
				var dtype = $(this).attr('data-type');
				var ids = $(this).attr('id');
				var category = $(this).attr('data-category');
				var c = $(this).attr('contactid');
				var child = $(this).attr('data-child');
				var o = $(this).attr('oss-path');
				var i = $(this).attr('is');
				console.log(dtype);
				if (dtype == 'video') {
					var a = $(this).attr('data-src');
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<video contactid="'+ c +'" src ="' + a + '" controls class="design-content content-image abc" type="' + dtype + '" resid="' + ids + '" category="' + category + '" style="display:none" onclick="ieplay()"></video>'));
					if (i == '0') {
						alert('抱歉,此视频正在转换编码中!');
						return false;
					}
				} else if (dtype == 'image') {
					var a = $(this).attr('data-src')
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<img src ="' + o + child + '" class="design-content content-image abc Mefoverimg" type="' + dtype + '" resid="' + ids + '" category="' + category + '" style="display:none;width:240px" contactid="' + c + '"></img>'));
				} else if (dtype == 'audio') {
					var a = $(this).attr('data-src')
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<div style="height:32px"></div><audio contactid="'+c+'"src ="' + a + '" controls class="design-content content-image abc" type="' + dtype + '" resid="' + ids + '" category="' + category + '" style="display:none;" onclick="ieplay()"></audio>'))
				} else if (dtype == 'swf' || dtype == 'pdf' || dtype == 'word' || dtype == 'condensed') {
					$('#geshi').show();
					$('#mask').show()
					return false
				} else if (dtype == 'ppt') {
					dtb = true;
					that.html('');
					$.ajax({
						type: 'get',
						url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
						datatype: 'json',
						data: {
							'category': category,
							'resid': ids,
							'contactid': c
						},
						success: function (msg) {
							clickslide()
							if(msg.code == '-1'){
								$('#tempDiv').html('');
								$('#pptwindow').show();
								$('#mask').show();
								dtb = false;
								return  false
							}else{
								msg.content = pptDivFilter(msg.content);
								$('.slide-wrapper').unbind('mouseup').mouseup(function(){

									if(dtb == true ){
										$('.loding').show();
										$('.loding').fadeOut(5000);

										delaytime1  = setTimeout(function(){
											if (typeof (msg.content) != 'string') {
												var k = $('#pageabc').children('.active').index();

												for (var y = 0; y < msg.content.length; y++) {
													$('.ai-plus').click();
													$('#tempDiv').html('');
													var a = msg.content[y];
													b = y + k;
													r = parseInt(k)+parseInt(y)+1;

													if(Allbg != null){

														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:url('+ Allbg +') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													else if(Allcbg != null){
														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:'+ Allcbg+';position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													$('.slide').eq(b).append($('#tempDiv').append(msg.content[y]));
													$('#tempDiv').children().each(function (i, n) {
														var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
														$(n).addClass(str);
													})
													$('#tempDiv').children().find('span').each(function (i, n) {
														var str = 'design-content content-text';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('img').each(function (i, n) {
														var str = 'design-content';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
													$('#tempDiv').children().each(function (ii, n) {
														var uu = $(n).clone();
														OurJS.Designer.setRunnable(uu);
														OurJS.Designer.setInnerSlideEvent(uu);
														$('.slide-wrapper .active').append(uu);
													})
													$('#tempDiv').html('');
												}
												$('#pageabc').children('.design-slide').eq(k+1).addClass('active').siblings().removeClass('active')
												$('.slide-wrapper').children('.slide').eq(k+1).addClass('active').siblings().removeClass('active')
											};
											dtb = false;
										},500)
									}
									else{
										dtb = false;
									}

								})
							}

						}
					})

				}
			})
		}

		$('#myfover .tmpl .design-content').bind('mouseup',function(e){

			var that = $(this);
			var dtype = $(this).attr('data-type');
			var ids = $(this).attr('id');
			var category = $(this).attr('data-category');
			var c = $(this).attr('contactid');
			if (dtype == 'ppt') {
				dtb = false;

				if(typeof(that.find('.pptparent')) == 'object' && that.siblings().length > 0){
					if(that.siblings().is(':hidden')){
						that.siblings().show();

					}else{
						that.siblings().hide();

					}
					return
				}
				$.ajax({
					type: 'get',
					url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
					datatype: 'json',
					data: {
						'category': category,
						'resid': ids,
						'contactid': c
					},
					success: function (msg) {
						dtb = false;

						$('.loding').show();
						$('.loding').fadeOut(5000);
						msg.content = pptDivFilter(msg.content);
						that.siblings('div').remove();
						if (typeof (msg.content) != 'string') {
							for (var i = 0; i < msg.content.length; i++) {
								drawPPTImage(msg.content[i],that.parent(),i,msg.content.length);
							}
						}
					}
				})
			}
		})

		mousdownidex();
		$('#myfover .tmpl .design-content').bind('mouseup mouseleave', function () {

			var b = $(this).attr('title1');
			var dtype = $(this).attr('data-type');
				console.log(dtype);
			if (typeof (b) != 'undefined')
				switch ($(this).attr('data-type')) {

					case 'image':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b)

						break;
					case 'video':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
					case 'ppt':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);
						break;
					case 'audio':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
					case 'word':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
					case 'pdf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
					case 'swf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
					case 'condensed':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png';
						var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
						$(this).html(iiimg + b);

						break;
				}

		})

		$(".design-element-container .design-element").draggable({
			appendTo: ".slide-wrapper .slide.active",
			helper: "clone",
		});
	}

	function showResourceList(msg) {
		$('#Teachfover').siblings('div').remove();
		var imgSrc;
		var favorCont = $('<div class="design-element-container"></div>')
		for (var i = 0; i < msg.msg.length; i++) {
			var mybox = $('<div class="design-element-container design-element-container2"><p>' + msg.msg[i].name + '</p></div>')
			favorCont.append(mybox)
			for (var k = 0; k < msg.msg[i].child.length; k++) {
				switch (msg.msg[i].type) {
					case 'image':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png'
						break;
					case 'video':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
						break;
					case 'ppt':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png'
						break;
					case 'audio':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
						break;
					case 'word':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
						break;
					case 'pdf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
						break;
					case 'swf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
						break;
					case 'condensed':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
						break;
				}
				mybox.append('<div class="design-element tmpl ui-draggable ui-draggable-handle current asd" style="min-width:240px"><div id="' + msg.msg[i].id + '"class="design-content content-image ppttitle" style="color:#666" data-type=' + msg.msg[i].type + ' data-src=' + msg.msg[i].vid_fullpath + ' title= "' + msg.msg[i].name + '"  title1="' + msg.msg[i].name + '" data-child="' + msg.msg[i].child[k].resource_path + '"  oss-path="' + msg.msg[i].oss_path + '" category ="' + msg.msg[i].category + '" contactid =' + msg.msg[i].child[k].contactid + ' is=' + msg.msg[i].child[k].is_transition + '><img src="' + imgSrc + '" style="margin-right:5px;width:20px">' + msg.msg[i].name + '</div></div>')
			}
		}
		$('#mybjfover').append(favorCont)
		$('#mybjfover .design-element-container2').children('div').hide();
		$('#mybjfover .design-element-container2').children('p').mousedown(function () {
			$(this).siblings('div').toggle();
			if ($(this).siblings('div').css('display') == 'block') {
				$(this).addClass('minusp1')
			} else {
				$(this).removeClass('minusp1')
			}
		})
		var tdelaytime;
		var dtb2 = false;
		var tdelaytime1;
		function mousdownidex() {
			$('#mybjfover .design-content').unbind('mousedown').mousedown(function () {
				$('#setbg').hide();
				bt+2;
				$(this).css('min-width', '240px');
				$(this).html('')
				var dtype = $(this).attr('data-type');
				var a = $(this).attr('data-child');
				var b = $(this).attr('oss-path');
				var id = $(this).attr('id');
				var c = $(this).attr('category');
				var d = $(this).attr('contactid');
				var i = $(this).attr('is');
				if (dtype == 'video') {
					$(this).html('');
					$(this).removeClass('design-content,content-image')
					$(this).append($('<video src ="' + b + a + '" controls class="design-content content-image abc" id="' + id + '" contactid="' + d + '" category="' + c + '" type="' + dtype + '" style="display:none" onclick="ieplay()"></video>'));
					if (i == '0') {
						alert('此视频正在转码中!');
						return false;
					}
				} else if (dtype == 'image') {
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<img src =' + b + a + ' class="design-content content-image abc Mefoverimg" id="' + id + '" contactid="' + d + '" category="' + c + '" type="' + dtype + '" style="display:none"></img>'))
				} else if (dtype == 'audio') {
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<div style="height:32px"></div><audio src =' + b + a + ' controls class="design-content content-image abc" id="' + id + '" contactid="' + d + '" category="' + c + '" type="' + dtype + '" style="display:none;" onclick="ieplay()"></audio>'))
				} else if (dtype == 'swf' || dtype == 'pdf' || dtype == 'word' || dtype == 'condensed') {
					$('#geshi').show()
					$('#mask').show()
					return false
				} else if (dtype == 'ppt') {
					dtb2 = true;
					$.ajax({
						type: 'get',
						url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
						datatype: 'json',

						data: {
							'category': c,
							'resid': id,
							'contactid': d
						},
						success: function (msg) {
							clickslide();
							if(msg.code == '-1'){
								$('#tempDiv').html('');
								$('#pptwindow').show();
								$('#mask').show();
								dtb2 = false;
								return  false

							}else{

								msg.content = pptDivFilter(msg.content);
								$('.slide-wrapper').unbind('mouseup').mouseup(function(){
									$('#tempDiv').html('')
									if(dtb2 == true ){
										$('.loding').show();
										$('.loding').fadeOut(5000);
										tdelaytime1  = setTimeout(function(){
											if (typeof (msg.content) != 'string') {
												var k = $('#pageabc').children('.active').index();
												for (var y = 0; y < msg.content.length; y++) {
													$('.ai-plus').click();
													$('#tempDiv').html('');
													var a = msg.content[y];
													b = y + k;
													r = parseInt(k)+parseInt(y)+1
													if(Allbg != null){
														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:url('+ Allbg +') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													else if(Allcbg != null){
														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:'+ Allcbg+';position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													$('.slide').eq(b).append($('#tempDiv').append(msg.content[y]));
													$('#tempDiv').children().each(function (i, n) {
														var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
														$(n).addClass(str);
													})
													$('#tempDiv').children().find('span').each(function (i, n) {
														var str = 'design-content content-text';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('img').each(function (i, n) {
														var str = 'design-content';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
													$('#tempDiv').children().each(function (ii, n) {
														var uu = $(n).clone();
														OurJS.Designer.setRunnable(uu);
														OurJS.Designer.setInnerSlideEvent(uu);
														$('.slide-wrapper .active').append(uu);
													})
													$('#tempDiv').html('');
												}
												$('#pageabc').children('.design-slide').eq(k+1).addClass('active').siblings().removeClass('active')
												$('.slide-wrapper').children('.slide').eq(k+1).addClass('active').siblings().removeClass('active')
											};
											dtb2 = false;
											$('#tempDiv').html('')
										},500)
									}
									else{
										dtb2 = false;
									}

								})
							}
						}
					})
				}
			})
		}
		$('#mybjfover .design-content').bind('mouseup',function(){
			dtb2 = false;
			var that = $(this);
			var dtype = $(this).attr('data-type');
			var id = $(this).attr('id');
			var c = $(this).attr('category');
			var d = $(this).attr('contactid');
			if (dtype == 'ppt') {
				dtb2 = false;
				if(typeof(that.find('.pptparent')) == 'object' && that.siblings().length > 0){
					if(that.siblings().is(':hidden')){
						that.siblings().show()
						dtb2 = false;
					}else{
						that.siblings().hide()
						dtb2 = false;
					}
					return
				}
				$.ajax({
					type: 'get',
					url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
					datatype: 'json',
					data: {
						'category':c,
						'resid': id,
						'contactid': d
					},
					success: function (msg) {
						dtb2 = false;
						$('.loding').show();
						$('.loding').fadeOut(5000);
						msg.content = pptDivFilter(msg.content);

						that.siblings('div').remove();
						if (typeof (msg.content) != 'string') {
							for (var i = 0; i < msg.content.length; i++) {
								drawPPTImage(msg.content[i],that.parent(),i,msg.content.length);
							}
						}
					}
				})
			}
		})
		mousdownidex()
		$('#mybjfover .design-element-container .design-element-container .tmpl .design-content').bind('mouseup mouseleave', function () {
			var b = $(this).attr('title1');
			if (typeof (b) != 'undefined')
				switch ($(this).attr('data-type')) {
					case 'image':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png'
						break;
					case 'video':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
						break;
					case 'ppt':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png';
						break;
					case 'audio':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
						break;
					case 'word':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
						break;
					case 'pdf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
						break;
					case 'swf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
						break;
					case 'condensed':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
						break;
				}
			var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
			$(this).html(iiimg + b)
		})
		$(".design-element-container .design-element").draggable({
			appendTo: ".slide-wrapper .slide.active",
			helper: "clone",
		});
	}

	function showMyMaterialList(msg) {

		$('#materials').siblings('div').remove();
		var imgSrc;
		var favorCont = $('<div class="design-element-container"></div>')
		for (var i = 0; i < msg.msg.length; i++) {
			switch (msg.msg[i].type) {
				case 'image':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png'
					break;
				case 'video':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
					break;
				case 'ppt':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png'
					break;
				case 'audio':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
					break;
				case 'word':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
					break;
				case 'pdf':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
					break;
				case 'swf':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
					break;
				case 'condensed':
					imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
					break;
			}
			favorCont.append('<div class="design-element tmpl ui-draggable ui-draggable-handle current asd" ><div id="' + msg.msg[i].id + '"class="design-content content-image ppttitle" style="color:#666" data-type=' + msg.msg[i].type + ' data-src=' + msg.msg[i].vid_fullpath + ' title= "' + msg.msg[i].name + '"  title1="' + msg.msg[i].name + '" data-child="' + msg.msg[i].file_path + '"  oss-path="' + msg.msg[i].oss_path + '" is=' + msg.msg[i].is_transition + '><img src="' + imgSrc + '" style="margin-right:5px;width:20px">' + msg.msg[i].name + '</div></div>')
		}
		$('#mymaterials').append(favorCont)
		var mdelaytime;
		var mdelaytime1;
		var dtb3 =false;
		function mousdownidex() {

			$('#mymaterials .tmpl .design-content').unbind('mousedow').mousedown(function () {
				$('#setbg').hide();
				bt+2;
				$(this).css('min-width', '240px');
				$(this).html('');
				var dtype = $(this).attr('data-type');
				var a = $(this).attr('data-child');
				var b = $(this).attr('oss-path')
				var d = $(this).attr('id');
				var i = $(this).attr('is')
				if (dtype == 'video') {
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<video src ="' + b + a + '" controls class="design-content content-image abc" id="' + d + '" type="' + dtype + '" category="mymaterial" style="display:none" onclick="ieplay()"></video>'));
					if (i == '0') {
						alert('此视频格式暂时不支持拖拽');
						return false;
					}
				} else if (dtype == 'image') {
					$(this).html('')
					$(this).parent().css('width','240px')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<img src =' + b + a + ' class="abc mymaterialsimg" id="' + d + '" type="' + dtype + '" category="mymaterial" style="display:none;width:100%;height:100%"></img>'))
				} else if (dtype == 'audio') {
					$(this).html('')
					$(this).removeClass('design-content,content-image')
					$(this).append($('<div style="height:32px"></div><audio src ="' + b + a + '" controls class="design-content content-image abc" id="' + d + '" type="' + dtype + '" category="mymaterial" style="display:none;" onclick="ieplay()"></audio>'))
				} else if (dtype == 'swf' ||  dtype == 'pdf' || dtype == 'word' || dtype == 'condensed') {
					$('#geshi').show();
					$('#mask').show();
					return false
				}else if(dtype == 'ppt'){
					dtb3 = true;
					$.ajax({
						type: 'get',
						url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
						datatype: 'json',

						data: {
							'category': 'material',
							'resid': d
						},
						success: function (msg) {


							clickslide();
							if(msg.code == '-1'){
								$('#tempDiv').html('');
								$('#pptwindow').show();
								$('#mask').show();
								dtb3 = false;
								return  false
							}else{

								msg.content = pptDivFilter(msg.content);
								$('.slide-wrapper').unbind('mouseup').mouseup(function(){
									if(dtb3 == true ){
										$('.loding').show();
										$('.loding').fadeOut(5000);
										mdelaytime1  = setTimeout(function(){
											if (typeof (msg.content) != 'string') {
												var k = $('#pageabc').children('.active').index();
												for (var y = 0; y < msg.content.length; y++) {
													$('.ai-plus').click();
													$('#tempDiv').html('');
													var a = msg.content[y];
													b = y + k;
													r = parseInt(k)+parseInt(y)+1
													if(Allbg != null){
														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:url('+ Allbg +') no-repeat;position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													else if(Allcbg != null){
														$('.slide').eq(r).append('<div style="width:100%;height:100%;background:'+ Allcbg+';position:absolute;top:0;left:0;z-index:-66;background-size:100% 100%" class="PPTbg design-element">')
													}
													$('.slide').eq(b).append($('#tempDiv').append(msg.content[y]));
													$('#tempDiv').children().each(function (i, n) {
														var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
														$(n).addClass(str);
													})
													$('#tempDiv').children().find('span').each(function (i, n) {
														var str = 'design-content content-text';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('img').each(function (i, n) {
														var str = 'design-content';
														addClassName(n, str);
													})
													$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
													$('#tempDiv').children().each(function (ii, n) {
														var uu = $(n).clone();
														OurJS.Designer.setRunnable(uu);
														OurJS.Designer.setInnerSlideEvent(uu);
														$('.slide-wrapper .active').append(uu);
													})
													$('#tempDiv').html('');
												}
												$('#pageabc').children('.design-slide').eq(k+1).addClass('active').siblings().removeClass('active')
												$('.slide-wrapper').children('.slide').eq(k+1).addClass('active').siblings().removeClass('active')
											};
											dtb3 = false;

										},500)
									}
									else{
										dtb3 = false;
									}

								})
							}
						}
					})

				}
			})
		}
		$('#mymaterials .tmpl .design-content').bind('mouseup',function () {

			var that = $(this);
			var dtype = $(this).attr('data-type');
			var id = $(this).attr('id');
			if (dtype == 'ppt') {

				dtb3 = false;
				if(typeof(that.find('.pptparent')) == 'object' && that.siblings().length > 0){
					if(that.siblings().is(':hidden')){
						that.siblings().show()
					}else{
						that.siblings().hide()
					}
					return
				}
				$.ajax({
					type: 'get',
					url: '/index.php?m=Home&c=LessonPlanning&a=getPPTHTMLs',
					datatype: 'json',
					data: {
						'category': 'material',
						'resid': id
					},
					success: function (msg) {
						$('.loding').show();
						$('.loding').fadeOut(5000);
						msg.content = pptDivFilter(msg.content);
						that.siblings('div').remove();
						that.parent().find('.pptparent').remove();
						if (typeof (msg.content) != 'string') {
							that.parent().find('.pptparent').remove();
							for (var i = 0; i < msg.content.length; i++) {
								drawPPTImage(msg.content[i],that.parent(),i,msg.content.length);
							}
						}
					}
				})
			}
		})
		mousdownidex()
		$('#mymaterials .tmpl .design-content').bind('mouseup mouseleave', function () {
			var b = $(this).attr('title1');
			if (typeof (b) != 'undefined')
				switch ($(this).attr('data-type')) {
					case 'image':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/image.png'
						break;
					case 'video':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/video.png'
						break;
					case 'ppt':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/ppt.png';
						break;
					case 'audio':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/audio.png'
						break;
					case 'word':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/word.png'
						break;
					case 'pdf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/pdf.png'
						break;
					case 'swf':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/swf.png'
						break;
					case 'condensed':
						imgSrc = '__PUBLIC__/web_img/LessonPlannings/condensed.png'
						break;
				}
			var iiimg = '<img src="' + imgSrc + '" style="margin-right:5px;width:20px">';
			$(this).html(iiimg + b);

		})

		$(".design-element-container .design-element").draggable({
			appendTo: ".slide-wrapper .slide.active",
			helper: "clone",
		});
	}

	function refreshLoader() {
		if ($("#fine-uploader").find(':file').attr('accept') != '.mp4,.mp3,.png,.jpg,.jpeg,.ppt,.pptx,.doc,.docx,.pdf,application/x-shockwave-flash')
			$("#fine-uploader").find(':file').attr('accept', '.mp4,.mp3,.png,.jpg,.jpeg,.ppt,.pptx,.doc,.docx,.pdf,application/x-shockwave-flash');
		if ($("#fine-uploader-background").find(':file').attr('accept') != '.png,.jpg,.jpeg')
			$("#fine-uploader-background").find(':file').attr('accept', '.png,.jpg,.jpeg');
		setTimeout("refreshLoader()", 150);
	}
	setTimeout("refreshLoader()", 150);

	function addClassName(obj, str) {
		$(obj).addClass(str);
		if ($(obj).children().length) {
			$(obj).children().each(function (ii, n) {
				addClassName(n, str);
			});
		}
	}

	function pptDivFilter(html) {
		function mergeLeftTopString(first, second, reg) {
			var headString = reg.toString().split(':')[0].split('/')[1];

			if (typeof (first) != 'undefined')
			{
				var matchedFirst = reg.exec(first);
			}
			if	(typeof (second) != 'undefined')
			{
				reg.lastIndex = 0;
				var matchedSecond = reg.exec(second);
			}
			var regfirst = (matchedFirst==null) || (typeof(matchedFirst)=='undefined') ? headString+':0px' : matchedFirst[0];
			var regsecond = (matchedSecond==null) || (typeof(matchedSecond)=='undefined') ? headString+':0px': matchedSecond[0];
			var newString = parseInt(regfirst.split(':')[1].split('px')[0]) + parseInt(regsecond.split(':')[1].split('px')[0]);
			return headString+':' + newString + 'px;';

		}
		var returnArray = new Array();
		$(html).each(function (index, value) {
			var currentPageDiv = "";
			var formatDiv = '<div style="position:absolute;{0}">{1}</div>';
			$(value).each(function (i, n) {

				$(n).children().attr('style', $(n).children().attr('style').replace(/^clip:rect.+\);/g, ""))

				$(n).children(":first").find('img').attr('style', $(n).children(":first").find('img').attr('style') + 'z-index:-2;')
				//merge span
				$(n).children().children().children().each(function(index,obj){
					if('DIV' == $(obj)[0].tagName)
					{
						var spanText = '';
						$(obj).find('span').each(function(spanI,spanObj){
							spanText += $(spanObj).text().trim();
							if(spanI != 0)
								$(spanObj).remove();
						});
						$($(obj).find('span')[0]).text(spanText);
					}
				});
				$(n).find('span,img,video,audio').each(function (i, nn) {
					var styleString = $(nn).attr('style');
					var regabs = /position:absolute;/g;
					//get parent's parent 's left and top
					var parentStyleString = $(nn).parent().attr('style');
					var parentParentStyleString = $(nn).parent().parent().attr('style');
					leftMatchedString = mergeLeftTopString(styleString,parentStyleString,/left:\-*\d*\.*\d*px;/);
					topMatchedString = mergeLeftTopString(styleString,parentStyleString,/top:\-*\d*\.*\d*px;/);
					leftMatchedString = mergeLeftTopString(leftMatchedString,parentParentStyleString,/left:\-*\d*\.*\d*px;/);
					topMatchedString = mergeLeftTopString(topMatchedString,parentParentStyleString,/top:\-*\d*\.*\d*px;/);

					if(typeof($(nn).attr('style')) != 'undefined')
						$(nn).attr('style', styleString.replace(/left:\-*\d*\.*\d*px;/, "").replace(/top:\-*\d*\.*\d*px;/,"").replace(regabs, ""));
					var width = $(nn).attr('width');
					var height = $(nn).attr('height');
					var widthHeightString = "";
					if(typeof(width) != 'undefined')
						widthHeightString += "width:" + width+'px;';
					if(typeof(width) != 'number')
						widthHeightString += "width:" + width+';';
					if(typeof(height) != 'undefined')
						widthHeightString += "height:" + height+'px;';
					if(typeof(height) != 'number')
						widthHeightString += "height:" + height;
					currentPageDiv += formatDiv.format(leftMatchedString+topMatchedString+widthHeightString, nn.outerHTML);
				})
			})
			returnArray.push(currentPageDiv);
		})
		return returnArray;
	}
	var isShowCorrectAnswer = false;
	function exerciseslist(msg){
//			console.log(msg)
		$('.layout-right .workname').remove();
		for(var i=0;i<msg.msg.length;i++){
			var n = msg.msg[i].questions;
			var mp3_path = msg.msg[i].video_file_path
			$('#myexercises').append('<div class="workname design-element tmpl ui-draggable ui-draggable-handle current ">'+n+'</div>');
			var a = $('#myexercises .workname').eq(i).children('p').eq(0).text()+$('#myexercises .workname').eq(i).children('p').eq(1).text();
//				if( a == ''){
//					a = $('#myexercises .workname').eq(i).children('p').eq(1).text()
//				}
			$('.layout-right .workname').eq(i).children().remove();
			$('.layout-right .workname').eq(i).append('<div class="design-content lkj" style="color:#666" title="'+a+'" mp3_path="'+mp3_path+'">'+a+'</div>')
		}
		$('.layout-right .workname').mousedown(function(){
			$(this).find('.exerciseWrapper').remove();
			$(this).append('<div class="exerciseWrapper slide_exercise  design-content" style="top:0" onclick="removedc()"></div>');
			$('.slide-wrapper').find('.exerciseWrapper').removeClass('exerciseWrapper');
			var b = $(this).index()-2;
			var new_arr=new Array();
			new_arr[0]=msg.msg[b];
			createMyCollectExercise(new_arr);
			//填空题
			$('.questionWrapper').addClass('design-content content-text');
			$('.questionWrapper').css({'max-height':'610px','overflow':'auto'})
			$('.tianKongInput').find('p,span,td').addClass('design-content content-text');
			$('.tianKongInput').find('p,span,td').css('font-size','12px');
			$('.tianKongInput').find('td').css('width','auto');
			var ir = $('.tianKongInput').find('td').children('input');
			ir.parent('td').removeClass('design-content content-text');
			$('.exerciseQuestion').find('p').addClass('design-content content-text');
			$('.exerciseQuestion').find('p').css({'font-size':'20px','display':'inline-block','position':'relative','top':'7px','line-height':'24px','width':'auto'});
			$('.exerciseQuestion').find('span').css('line-height','auto');
			$('.tianKongInput').find('input').addClass('inputval');
			$('.tianKongInput').find('input').attr('onblur','inputval()');
			$('.exerciseQuestionWordOption').find('input').addClass('inputrad');
			$('.exerciseQuestionWordOption').find('input').attr('onclick','inputrad()');
			$('.exerciseQuestionWordOption').css('width','auto');
			//多行文本
			$(this).find('.textAreaInput').addClass('design-content content-text');
			$(this).find('.textAreaInput').css('font-size','16px')
			$(this).find('.textAreaInput').find('textarea').remove();
			$(this).find('.textAreaInput').find('div').html('答：').addClass('design-content content-text').css({'height':'100%','font-size':'20px'})
			//选择题、
			$('.subquestionTitle,.exerciseQuestionWordOption').addClass('design-content content-text');
			$('.subquestionTitle').css('font-size','14px');
			$('.exerciseQuestionWordOption').css('font-size','12px')
			for(var i = 0;i<$('.questionWrapper').length;i++){
				$('.questionWrapper').eq(i).find('.subquestionTitle').eq(0).css('margin-top','0');
			}
			//连线题；
			$('.matchQuestion').find('.matchQuestionShowItem,.matchQuestionWrapper').addClass('design-content content-text');
			$('.matchQuestion').find('.matchQuestionShowItem').css('font-size','12px');
			var mtl = $(this).find('.match_tools').length;
			if(mtl>0){
				$(this).find('.match_tools').remove();
			}
			//音频题处理;
			var m = $(this).find('.mp3_player').length;
			if(m>0){
				$(this).find('.mp3_player').remove();
				var mp = $(this).find('.lkj').attr('mp3_path');
				$('.slide-wrapper').find('.mp3_player').remove()
				$(this).find('.exerciseQuestion').append('<div style="width:300px;"><video src ="'+mp+'" controls="controls"  class="design-content" onclick="ieplay()"></video></div>')
			}
		})
//			习题题目预览
		$('.layout-right .workname').click(function(){
			$('#mask2').show();
			$('#mask2').append('<div class="exerciseWrapper slide_exercise exershow " style="height:610px;overflow:auto;background:#fff;width:940px;margin:130px auto"></div>');
			var b = $(this).index() - 2;
			var new_arr=new Array();
			new_arr[0]=msg.msg[b];
			createMyCollectExercise(new_arr);
			$('.questionWrapper').find('.subquestionTitle').css({'float':'none','margin-top':'140px'})
			var pt = $(this).find('.lkj').attr('mp3_path');
			var x = $('#mask2').find('.mp3_player').length;
			if(x>0){
				$('#mask2').find('.exerciseQuestion').append('<div style="width:300px;"><video src ="'+pt+'" controls="controls" style="width:100%" onclick="ieplay()"></div>')
			}
			for(var i = 0;i<$('.questionWrapper').length;i++){
				$('.questionWrapper').eq(i).find('.subquestionTitle').eq(0).css('margin-top','0')
			}

		})
		$('#mask2').click(function(){
			$(this).hide();
			$(this).children().remove()
		})
		$('.layout-right .workname').bind('mouseleave mouseup',function(){
			var h = $(this).children('.design-content').attr('title');
			$(this).children('.design-content').html(h);
			$('.layout-right .exerciseWrapper').remove()
		})
		$(".design-element-container .design-element").draggable({
			appendTo: ".slide-wrapper .slide.active",
			helper: "clone",
		});
	}
</script>
<script>
	$("#example1").on("click", function(event) {
		event.preventDefault();
		html2canvas(document.body, {
			"proxy":"html2canvasproxy.php",
			onrendered: function(canvas) {
				//canvas.id = "mycanvas";
				//document.body.appendChild(canvas);
				//ʺԉbase64ͼƬ˽ߝ
				var dataUrl = canvas.toDataURL();
				var newImg = document.createElement("img");
				newImg.src =  dataUrl;
				document.body.appendChild(newImg);
			}
		});
	});
</script>
<script type="text/javascript" src="__PUBLIC__/createLesson/js/prod.designer.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/html2canvas.js"></script>
<script type="text/javascript" src="__PUBLIC__/umeditor/third-party/mathquill/mathquill.js"></script>

<script>
	function getBase64(img){
		function getBase64Image(img,width,height) {
			var canvas = document.createElement("canvas");
			canvas.width = width ? width : img.width;
			canvas.height = height ? height : img.height;

			var ctx = canvas.getContext("2d");
			ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
			var dataURL = canvas.toDataURL();
			return dataURL;
		}
		var image = new Image();
		image.crossOrigin = '';
		image.src = 'html2canvasproxy.php?url='+img;
		var deferred=$.Deferred();
		if(img){
			image.onload =function (){
				deferred.resolve(getBase64Image(image));//将base64传给done上传处理
			}
			return deferred.promise();//问题要让onload完成后再return sessionStorage['imgTest']
		}
	}
	var pptPagesContent = {};
	function createPPTDiv(pptAllLength,obj){
		if(obj.find('.pptContent').length != pptAllLength)
		{
			var createPageCount = pptAllLength - obj.find('.pptContent').length;
			for(var i=1;i<=createPageCount;i++)
				obj.append('<div class="pptContent design-element content-image cvb" style="border:none;padding:0;height:100px;z-index:2000;cursor:move "></div>')

			pptPagesContent[obj.children().attr('id')] = {};
		}
	}
	function drawPPTImage(content,obj,currentPage,pptAllLength){

		createPPTDiv(pptAllLength,obj);
		pptPagesContent[obj.children().attr('id')][currentPage] = content;
		var currentLength = $('.slide-wrapper .tempSlideDiv').length;
		var currentLength1= currentLength +1;
		var contentJquery = $(content);

		contentJquery.find('img').each(function(i,n){
			n.src = 'html2canvasproxy.php?url='+n.src;
		});
		var contentTemp='';
		contentJquery.each(function(i,n){
			contentTemp += n.outerHTML
		})
		$('.slide-wrapper').append('<div class="ui-droppable active tempSlideDiv" style="width:940px;height:610px;position:relative;top:'+currentLength1*610+'px">'+contentTemp+'</div>');
		//event.preventDefault();
		html2canvas($('.tempSlideDiv')[currentLength]).then(canvas=>{
			canvas.id = "mycanvas";

		var dataUrl = canvas.toDataURL("image/png").replace("image/png","image/octet-stream");
		var newImg = document.createElement("img");
		newImg.src =  dataUrl;
		newImg.width=150;
		newImg.height=100;
		newImg.className='pptparent';

		obj.find('.pptContent')[currentPage].innerHTML = newImg.outerHTML+'<div class="ijn " style="display:none;width:940px;height:610px;position:absolute;top:0;left:0">'+pptPagesContent[obj.children().attr('id')][currentPage]+'</div>';

		//obj.append('<div>'+newImg.outerHTML+'<div class="ijn" style="display:none;width:940px;height:610px;position:absolute;top:0;left:0">'+content+'</div></div>')

		//obj.append(newImg);
//				append
		if($(obj).find('.pptparent').length == pptAllLength)
			$('.tempSlideDiv').remove();

		var pptime
		var valbtn =false;
		$('#myfover .pptparent').unbind('mousedown').mousedown(function(){
			$('#setbg').hide();
			bt+2;
			$(this).parent().removeClass('cvb')
			$(this).parent().siblings().addClass('cvb');
			$(this).parent().parent().css('z-index',2000)
			var this_ = $(this)
			pptime = setTimeout(function(){
				valbtn =  true;
			},300)
			$('.slide-wrapper').unbind('mouseup').mouseup(function(){
				if(valbtn == true){

					$('#tempDiv').html('');
					var c = this_.siblings('.ijn').html();
					$('#tempDiv').append(c);
					$('#tempDiv').find('div').each(function (i, n) {
						var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').find('img,video,audio').each(function (i, n) {
						var str = 'design-content ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').children().find('span').each(function (i, n) {
						var str = 'design-content content-text';
						addClassName(n, str);
					})
					$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
					$('#tempDiv').children().each(function (ii, n) {
						var uu = $(n).clone();
						OurJS.Designer.setRunnable(uu);
						OurJS.Designer.setInnerSlideEvent(uu);
						$('.slide-wrapper .active').append(uu);
					})
					$('#tempDiv').html('');
					$('.slide-wrapper .pptContent').remove()
					this_.parent().addClass('cvb')
				}
				valbtn = false;
			})
		})
		$('#myfover .pptparent').mouseup(function(){
			valbtn = false;
			$(this).parent().addClass('cvb');
			clearTimeout(pptime);
		})
		$('#mybjfover .pptparent').unbind('mousedown').mousedown(function(){
			$('#setbg').hide();
			bt+2;
			$(this).parent().removeClass('cvb')
			$(this).parent().siblings().addClass('cvb');
			$(this).parent().parent().css('z-index',2000)
			var this_ = $(this)
			pptime = setTimeout(function(){
				valbtn =  true;
			},300)
			$('.slide-wrapper').unbind('mouseup').mouseup(function(){
				if(valbtn == true){

					$('#tempDiv').html('');
					var c = this_.siblings('.ijn').html();
					$('#tempDiv').append(c);
					$('#tempDiv').find('div').each(function (i, n) {
						var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').find('img,video,audio').each(function (i, n) {
						var str = 'design-content ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').children().find('span').each(function (i, n) {
						var str = 'design-content content-text';
						addClassName(n, str);
					})
					$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
					$('#tempDiv').children().each(function (ii, n) {
						var uu = $(n).clone();
						OurJS.Designer.setRunnable(uu);
						OurJS.Designer.setInnerSlideEvent(uu);
						$('.slide-wrapper .active').append(uu);
					})
					$('#tempDiv').html('');
					$('.slide-wrapper .pptContent').remove()
					this_.parent().addClass('cvb')
				}
				valbtn = false;
			})

		})
		$('#mybjfover .pptparent').mouseup(function(){
			valbtn = false;
			$(this).parent().addClass('cvb');
			clearTimeout(pptime);
		})
		$('#mymaterials .pptparent').unbind('mousedown').mousedown(function(){
			$('#setbg').hide();
			bt+2;
			$(this).parent().removeClass('cvb')
			$(this).parent().siblings().addClass('cvb');
			$(this).parent().parent().css('z-index',2000)
			var this_ = $(this)
			pptime = setTimeout(function(){
				valbtn =  true;
			},300)
			$('.slide-wrapper').unbind('mouseup').mouseup(function(){
				if(valbtn == true){

					$('#tempDiv').html('');
					var c = this_.siblings('.ijn').html();
					$('#tempDiv').append(c);
					$('#tempDiv').find('div').each(function (i, n) {
						var str = 'design-element ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').find('img,video,audio').each(function (i, n) {
						var str = 'design-content ui-draggable ui-draggable-handle ui-draggable-dragging ui-resizable';
						$(n).addClass(str);
					})
					$('#tempDiv').children().find('span').each(function (i, n) {
						var str = 'design-content content-text';
						addClassName(n, str);
					})
					$('#tempDiv').children().find('span').parent().append('<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90; display: block;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90; display: block;"></div>')
					$('#tempDiv').children().each(function (ii, n) {
						var uu = $(n).clone();
						OurJS.Designer.setRunnable(uu);
						OurJS.Designer.setInnerSlideEvent(uu);
						$('.slide-wrapper .active').append(uu);
					})
					$('#tempDiv').html('');
					$('.slide-wrapper .pptContent').remove()
					this_.parent().addClass('cvb')
				}
				valbtn = false;
			})

		})
		$('#mymaterials .pptparent').mouseup(function(){
			valbtn = false;
			$(this).parent().addClass('cvb');
			clearTimeout(pptime);
		})

	})


	}
</script>
<script>
	function myppttitle(){
		var te	;
		var ty
		for(var i=0 ;i<$('#myfover').find('.ppttitle').length;i++){
			te =  $('#myfover').find('.ppttitle').eq(i).attr('title');
			ty =  $('#myfover').find('.ppttitle').eq(i).attr('data-type');
			if($('#myfover').find('.ppttitle').eq(i).attr('data-type') =='ppt'){
				$('#myfover').find('.ppttitle').eq(i).hover(function(){
					te = $(this).attr('title')
					$(this).attr('title','点击可查看缩略图哦！')
				},function(){
					$(this).attr('title',te)
				})
			}
		}
	}
	function teacherppttitle(){
		var te	;
		var ty
		for(var i=0 ;i<$('#mybjfover').find('.ppttitle').length;i++){
			te =  $('#mybjfover').find('.ppttitle').eq(i).attr('title');
			ty =  $('#mybjfover').find('.ppttitle').eq(i).attr('data-type');
			if($('#mybjfover').find('.ppttitle').eq(i).attr('data-type') =='ppt'){
				$('#mybjfover').find('.ppttitle').eq(i).hover(function(){
					te = $(this).attr('title')
					$(this).attr('title','点击可查看缩略图哦！')
				},function(){
					$(this).attr('title',te)
				})
			}
		}
	}
	function meppttitle(){
		var te	;
		var ty
		for(var i=0 ;i<$('#mymaterials').find('.ppttitle').length;i++){
			te =  $('#mymaterials').find('.ppttitle').eq(i).attr('title');
			ty =  $('#mymaterials').find('.ppttitle').eq(i).attr('data-type');
			if($('#mymaterials').find('.ppttitle').eq(i).attr('data-type') =='ppt'){
				$('#mymaterials').find('.ppttitle').eq(i).hover(function(){
					te = $(this).attr('title')
					$(this).attr('title','点击可查看缩略图哦！')
				},function(){
					$(this).attr('title',te)
				})
			}
		}
	}
	/*保存input输入框的值和单选按钮的选中*/
	function inputval(){
		for(var i = 0;i<$('.active .inputval').length;i++){

			var v = $('.active .inputval').eq(i).val();
			$('.active .inputval').eq(i).attr('value',v);
		}
		$('.active .exerciseWrapper').addClass('design-content')
	}
	//多行文本框的保存
	function textareaval(){
		for(var i = 0;i<$('.active .textareavl').length;i++){
			console.log($('.active .textareavl').eq(i).val());
			var v = $('.active .textareavl').eq(i).val();
			$('.active .textareavl').eq(i).attr('attaval',v);
		}
		$('.active .exerciseWrapper').addClass('design-content')
	}
	function inputrad(){
		$('.active .exerciseQuestionWordOption').find('.inputrad').click(function(event){
			event.stopPropagation();
			$(this).attr('checked','checked');
		})
	}
	function removedc(){
		$('.active .exerciseWrapper').click(function(event){
			event.stopPropagation();
			$(this).removeClass('design-content')
		})
	}
	$('.slide-wrapper .active').click(function(event){
		event.stopPropagation();
		$(this).find('.exerciseWrapper').addClass('design-content');
		$('.mymaterialsimg').css('width','100%')
	});
	//解决拖出来的图片太大
	$('.slide-wrapper .active').mouseup(function(){
		$('.mymaterialsimg,.Mefoverimg').css('width','100%');
		$('.slide-wrapper .active .mymaterialsimg,.slide-wrapper .active .Mefoverimg').parent().css('min-width','0px');
		$('.slide-wrapper .active .mymaterialsimg,.slide-wrapper .active .Mefoverimg').parent().parent().css({
			'min-width':'200px',
			'max-width':'800px'
		})
		$('.slide-wrapper .active .Mefoverimg').parent().css('width','100%')

	})
	//左上角的按钮跳转
	$('.navThumImg').click(function () {
		var url = $(this).attr('data-url');
		window.location.href = url;
	});
	//习题筛选
	$('#searchBox4').find('.search_btn').click(function(){
		$('#myexercises').find('.workname').hide();
		var exval =  $(this).siblings('.search_text').val();
		var e_arr = new Array();
		for(var i = 0;i<$('#myexercises').find('.workname').length;i++){
			e_arr.push($('#myexercises').find('.workname').eq(i).children('.lkj').text())
		}
		if(exval != ''){
			var nPos;
			var vResult = [];
			for(var i in e_arr){
				var sTxt=e_arr[i]||'';
				nPos = find(exval, sTxt);
				if(nPos>=0){
					vResult[vResult.length] = sTxt;
				}
			}
			for(var j = 0;j<vResult.length;j++){
				for(var l = 0;l<$('#myexercises').find('.workname').length;l++){
					if(vResult[j] == $('#myexercises').find('.workname').eq(l).children('.lkj').text()){
						$('#myexercises').find('.workname').eq(l).show()
					}
				}
			}
		}
		else{
			$('#myexercises').find('.workname').show();
		}
	})

	//筛选的数组匹配
	function find(sFind, sObj){
		var nSize = sFind.length;
		var nLen = sObj.length;
		var sCompare;
		if(nSize <= nLen ){
			for(var i = 0; i <= nLen - nSize + 1; i++){
				sCompare = sObj.substring(i, i + nSize);
				if(sCompare == sFind){
					return i;
				}
			}
		}
		return -1;
	}
	function ieplay(){

		var Sys = {};
		var ua = navigator.userAgent.toLowerCase();
		var s;
		(s = ua.match(/rv:([\d.]+)\) like gecko/)) ? Sys.ie = s[1] :
				(s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
						(s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
								(s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
										(s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
												(s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
		if(Sys.ie){
			var vd = document.getElementsByTagName('video');
			var ad = document.getElementsByTagName('audio');
			for(var i = 0;i<vd.length;i++){
				vd[i].onclick = function(){
					if (this.paused)
						this.play()
					else
						this.pause()
				}
			}
			for(var i = 0;i<ad.length;i++){
				ad[i].onclick = function(){
					if (this.paused)
						this.play()
					else
						this.pause()
				}
			}
		}

	}
	$('#addfile,#uploadfile_background').click(function(){
		var browser=navigator.appName
		var b_version=navigator.appVersion
		var version=b_version.split(";");
		var trim_Version=version[1].replace(/[ ]/g,"");
//		if(browser=="Microsoft Internet Explorer" && trim_Version=="MSIE9.0")
//		{
//			alert("当前浏览器暂不支持该功能，请选择其他浏览器！");
//            $(':file').attr('disabled','disabled')
//			return false;
//		}
	})
	$('.design-plus').click(function(){
		$('#btnparent').show();
		var a =  $('#pageabc').find('.active').index();
		var b =  $('#pageabc').find('.design-slide').length
		if(a+1 == b){
			$('#next_page').hide()
		}else if(a+1<b && a != 0){
			$('#pre_page,#next_page').show()
		}
	})
	$('#pageabc').click(function(){
		var g = $(this).find('.active').index();
		var x = $('#pageabc').find('.design-slide').length;
		if( g+1 == x){
			$('#next_page').hide();
			$('#pre_page').show()
		}else if(g+1<x && g !== 0){
			$('#pre_page,#next_page').show();

		}else if( g+1<x && g ==0){
			$('#pre_page').hide();
			$('#next_page').show()
		}
	})
	//下一页
	function next_page(){
		var index_a = $('#pageabc').find('.active').index();
		var length_a = $('#pageabc').find('.design-slide').length;
		$('#pageabc').children('.design-slide').eq(index_a+1).addClass('active').siblings().removeClass('active');
		$('.slide-wrapper').children('.slide').eq(index_a+1).addClass('active').siblings().removeClass('active');
		if(length_a == 1){
			$('#pre_page,#next_page').hide()
		}
		else if(index_a == length_a-2){
			$('#next_page').hide();
			$('#pre_page').show()
		}else{
			$('#pre_page,#next_page').show()
		}
	}
	//上一页
	function pre_page(){
		var index_b = $('#pageabc').find('.active').index();
		var length_b = $('#pageabc').find('.design-slide').length;
		$('#pageabc').children('.design-slide').eq(index_b-1).addClass('active').siblings().removeClass('active');
		$('.slide-wrapper').children('.slide').eq(index_b-1).addClass('active').siblings().removeClass('active');
		if(index_b == 1){
			$('#pre_page').hide();
			$('#next_page').show()
		}else{
			$('#pre_page,#next_page').show()
		}
	}
	$('#gohome').hover(function(){
		$(this).attr('src','Public/img/bar_home2.png')
	},function(){
		$(this).attr('src','Public/img/bar_home.png')
	})
	$('#gome').hover(function(){
		$(this).attr('src','Public/img/bar_person2.png')
	},function(){
		$(this).attr('src','Public/img/bar_person.png')
	})
	$('#gohelp').hover(function(){
		$(this).attr('src','Public/img/bar_help2.png')
	},function(){
		$(this).attr('src','Public/img/bar_help.png')
	})
	$('#goclose').hover(function(){
		$(this).attr('src','Public/img/bar_logout2.png')
	},function(){
		$(this).attr('src','Public/img/bar_logout.png')
	})
</script>
<script src="__PUBLIC__/infoPerfect/infoPerfect.js"></script>
</body>

</html>
