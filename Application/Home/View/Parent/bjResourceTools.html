<layout name="parent_layout_2" />
<link href="__PUBLIC_METRO__/css/app/table_list2.css?v=3.0" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/rotate.css">
<style>
	body {
		display: block;
	}
	
	.left {
		float: left;
	}
	
	.right {
		float: right;
	}
	
	.ml10 {
		margin-left: 10px;
	}
	
	.mr10 {
		margin-right: 10px;
	}
	
    ul,
    li {
        list-style: none;
        padding: 0;
        margin: 0;
    } 
    .tools_li {
        text-align: center;
        color: #666;
        font: 12px/30px "微软雅黑";
        margin-bottom: 50px;
    }
    
	.tools_box p{
		margin:0;
    	line-height:40px;
	}
	
    .row {
        margin: 0;
    }
    
    .tools_li img {
        display: inline-block;
    }
    
    .tools_li a {
        display: block;
        font: 16px/30px "微软雅黑";
        color: #666;
    }
    
    .tools_box {
        width: 240px;
        overflow: hidden;
        margin: 0 auto;
        border-radius: 10px;
        -webkit-box-shadow: 0 0 40px #ccc;
        -moz-box-shadow: 0 0 40px #ccc;
        box-shadow: 0 0 40px #ccc;
    }
    
   #navThumImg1, #navThumImg3 {
        -moz-transform:rotate(20deg);
        -webkit-transform:rotate(20deg);
        transform:rotate(20deg);
    }
    
    #navThumImg2, #navThumImg4 {
        -moz-transform:rotate(-20deg);
        -webkit-transform:rotate(-20deg);
        transform:rotate(-20deg);
    }
    
    #navThumImg1:hover,#navThumImg3:hover {
        -moz-animation:rotate_z 0.8s infinite ease;
        -webkit-animation:rotate_z 0.8s infinite ease;
        animation:rotate_z 0.8s infinite ease;
    }
    
    #navThumImg2:hover, #navThumImg4:hover {
        -moz-animation:rotate_f 0.8s infinite ease;
        -webkit-animation:rotate_f 0.8s infinite ease;
        animation:rotate_f 0.8s infinite ease;
    }
    
    @-moz-keyframes rotate_z{
        0%{
          -moz-transform:rotate(20deg);
         }
         100%{
           -moz-transform:rotate(360deg);
         }
      }
    
      @-webkit-keyframes rotate_z{
        0%{
          -webkit-transform:rotate(20deg);
         }
         100%{
           -webkit-transform:rotate(360deg);
         }
      }
    
      @keyframes rotate_z{
        0%{
          transform:rotate(20deg);
         }
         100%{
           transform:rotate(360deg);
         }
      }
    
    @-moz-keyframes rotate_f{
        0%{
          -moz-transform:rotate(20deg);
         }
         100%{
           -moz-transform:rotate(360deg);
         }
      }
    
      @-webkit-keyframes rotate_f{
        0%{
          -webkit-transform:rotate(20deg);
         }
         100%{
           -webkit-transform:rotate(360deg);
         }
      }
    
      @keyframes rotate_f{
        0%{
          transform:rotate(20deg);
         }
         100%{
           transform:rotate(360deg);
         }
      }
	
	.nobookUl {
		padding: 17px 0;
		margin-left: 6%;
		overflow: hidden;
	}
	
	.nobookUl span {
		float: left;
		padding: 6px 12px 6px 0;
	}
	
	.nobookUl ul {
		overflow: hidden;
		float: left;
	}
	
	.nobookUl li {
		float: left;
		margin-right:10px;
	}
		
	.nobookUl li a{
		display: block;
		padding: 6px 12px;
		background: #bedb81;
		color: #fff;
	}
		
	.nobookUl li a:hover{
		background: #92B925;
		text-decoration: none;
	}
	
	#layui-layer-shade1 {
		z-index: 20160929 !important;
	}
	
	#layui-layer1 {
		z-index: 20160930 !important;
	}
			.search{float: right;
    width:310px;
    height: 32px;
    line-height: 30px;
    border: 1px solid #b9b9b9;
    border-radius: 20px;
    background: #f4f4f4;
	margin-right: 90px;}
	.search_btn{
		    float: left;
    width: 30px;
    height: 30px;
    border: none;
    background: none;
    background: url(__PUBLIC__/img/resource/search_btn.png) no-repeat center;
    background-size: 50% 50%;
    border-radius: 20px;
    outline: none;
	}
	.search_text {
    width: 250px;
    text-indent: 15px;
    border-radius: 20px;
    border: none;
    background: none;
    outline: none;
    padding: 0;
    height: 30px;
    line-height: 30px;
	}
		#ietanchuang{
		    width: 473px;
    height: 280px;
    position: fixed;
    top: 37%;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0 auto;
    background: url(__PUBLIC__/img/toolTip/ietanchuang.png) no-repeat;
    border-radius: 10px;
    z-index: 20161002;
    font-size: 16px;
    color: #666;
		display: none;
	}
	#ietanchuang span{      padding: 7px 50px;
    background-color: #04c9a8;
    position: absolute;
    top: 200px;
    left: 170px;
    border-radius: 8px;
    cursor: pointer;
    color: #fff;}
</style>
<script src="__PUBLIC__/js/jquery.min.1.7.js"></script>
<script src="__PUBLIC__/js/jquery.lazyload.js"></script>
<div class="main_opr">
<!--    <a href="{:U('Parent/myFavorBjResource')}" title="我收藏的资源" class="btn btn-main-opr">我收藏的资源</a>-->
</div>

<div style="margin-bottom: 12px;">
    <a href="{:U('Parent/bjResourceList')}" title="返回" class="btn btnReturn2">返回</a>
           <div class="resource_top">
        <div class="search">
            <button class="search_btn"></button>
          
            <input type="text" name="keyword" value="" class="search_text" placeholder="请输入资源名称">
        </div>
    </div>
</div>
 
<div class="nobookUl">
	<span>精选资源：</span>
	<ul>
		<li><a class="nobookLi1" href="{:U('Parent/bjResourceTools')}&cat=0">小学科学</a></li>
		<li><a class="nobookLi2" href="{:U('Parent/bjResourceTools')}&cat=1">生物实验</a></li>
		<li><a class="nobookLi3" href="{:U('Parent/bjResourceToolsPhysics')}">物理实验室</a></li>
	</ul>
</div>
 
<div class="tools">
    <empty name="list">
	<div class="emptyResult">暂时没有信息</div>
    </empty>
        <ul class="row tools_ul"> 
            <volist name="list" id="data" empty="">
                <li class="col-md-3 tools_li">
                    <div class="tools_box">
                        <!----><a href="javascript:;" class="location_nb" attr="{$data->id}" title="{$data->name}">
                            <img class="lazy" src="{$data->img}" original="{$data->img}"  style="width:100%;">
                            <p style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;padding:0 10px">{$data->name}</p>
                        </a>
                        <p>
                            &nbsp;&nbsp;<span class="company_span left ml10">北京出版集团</span>
                            <if condition="$cat eq 0">
                            	<span class="course_span right mr10">小学科学</span>&nbsp;&nbsp;
                            <else />
                            	<span class="course_span right mr10">生物实验</span>&nbsp;&nbsp;
							</if>
                        </p>
                    </div>
                </li> 
            </volist>
        </ul>
</div> 
 <div id="ietanchuang">
	<span>好的</span>
</div>
<script src="__PUBLIC__/js/external/jquery-ui-1.10.1.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/layer/layer.js"></script>
<script src="__PUBLIC__/js/exercise/md5.js"></script>
<script>
//搜索
		$('#ietanchuang').find('span').click(function(){
		$(this).parent().hide()
	})
      var allName = new Array();
	  for(var i = 0;i<$('.location_nb').find('p').length;i++){
		 allName.push($('.tools_ul').find('a').eq(i).attr('title'))
	  }
        $('.search_btn').click(function(){
		  $('.tools_li').hide();
		  $('.tools_li').css('float','none')
		  if($('.search_text').val() != ''){
			  var searchtext = $('.search_text').val();
			  var nPos;   
              var vResult = [];   
              for(var i in allName){   
                  var sTxt=allName[i]||'';  
                  nPos = find(searchtext, sTxt);    
                  if(nPos>=0){   
                  vResult[vResult.length] = sTxt;   
              } 	  
           }
			  console.log(vResult.length)
		   for(var j = 0;j<vResult.length;j++){
			    for(var l = 0;l<$('.tools_ul').find('a').length;l++){
					if(vResult[j] == $('.tools_ul').find('a').eq(l).attr('title')){
						$('.tools_li').eq(l).css('display','inline-block')
						var c = $('.tools_ul').find('a').eq(l).children('img').attr('original');
						$('.tools_ul').find('a').eq(l).children('img').attr('src',c);		
					}
				}  
		   }
			  	   if($('.tools_ul').height() == '0'){
			   $('#nolist').remove();
			   $('.tools').append('<p id="nolist" style="text-align:center;font-size:16px">暂时没有资源哦!<p>')
		   }else if($('.tools_ul').height() != '0'){
			   $('#nolist').remove();
		   }
		   }else{  
			  $('.tools_li').css('display','block');
			    $('.tools_li').css('float','left')
		  }
	  })
	  function find(sFind, sObj){   
			var nSize = sFind.length;   
			var nLen = sObj.length;    
			var sCompare;  
			if(nSize <= nLen ){   
				for(var i = 0; i <= nLen - nSize + 1; i++){   
					sCompare = sObj.substring(i, i + nSize);   
					if(sCompare == sFind){   
						return i;   
					}   
				}   
			}   
			return -1;   
	  }
	  $(".search_text").keydown(function (evt) {
           if (event.keyCode == "13") { //keyCode=13是回车键
				var evt = (evt) ? evt : ((window.event) ? window.event : "")
				var keyCode = evt.keyCode ? evt.keyCode : (evt.which ? evt.which : evt.charCode); 
				$('.search_btn').click()
          }
      }) 
</script>
<script>   
    var cat="{$cat}";  
    var attr_id,string;
    if(cat==0){
        var url='http://science.nobook.com.cn/openapi';
        var resource_url='http://science.nobook.com.cn/online/view/';
		$('.nobookLi1').css('background','#92B925')
    }else{
        var url='http://shengwu.nobook.com.cn/openapi';
        var resource_url='http://shengwu.nobook.com.cn/online?id=';
		$('.nobookLi2').css('background','#92B925')
    } 
           var Sys = {};
        var ua = navigator.userAgent.toLowerCase();
        var s;
		(s = ua.match(/rv:([\d.]+)\) like gecko/)) ? Sys.ie = s[1] :
		(s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
		(s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
		(s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
		(s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
		(s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
	    if(Sys.ie){
		$('.nobookLi3').click(function(){
			$('#ietanchuang').show();
		return false
		})
	    }
    $('.location_nb').click(function () {
		   

		if (Sys.ie) 
		{$('#ietanchuang').show();
		return false};
        $(document.body).css({
            "overflow-x":"hidden",
            "overflow-y":"hidden"
        });
        
        var temp_url='';
        attr_id=$(this).attr('attr') 
        
        $.get("{:U('Teach/getNobookLink')}",function(msg){
            string=msg;
            temp_url=url+string+'&url='+resource_url+attr_id;
            
            layer.open({
                type: 2,
                title: false,
                closeBtn: 3, //不显示关闭按钮
                shade: [0.7, '#000', true],
                area: ['90%', '90%'],
                time: 99999999999, //2秒后自动关闭
                shift: 2,
                zIndex :111111111,
                content: [temp_url, 'no'], //iframe的url，no代表不显示滚动条 
                end:function(){
                    $(document.body).css({
                        "overflow-x":"auto",
                        "overflow-y":"auto"
                    });
                }

            })
        }); 
    })
</script>