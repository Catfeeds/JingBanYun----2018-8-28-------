<layout name="teacher_layout"/>
<link href="__PUBLIC__/umeditor/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
<script type="text/javascript" charset="utf-8" src="__PUBLIC__/umeditor/umeditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__PUBLIC__/umeditor/umeditor.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/umeditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="http://cdn.bootcss.com/jquery-validate/1.15.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/jquery.validate.msg.js"></script>
<style>
    .form_section {
        margin-bottom: 12px;
    }
</style>
<div style="margin-bottom: 12px;">
    <a href="javascript:window.history.go(-1)" title="返回">&lt; 返回</a>
</div>
<div>
    <form id="mainForm" action="__URL__/modifyResource" method="post">
        <input type="hidden" name="id" value="{$id}">
        <div class="example" data-text="基本信息">
            <div class="form_section">
                <label for="name">资源名称</label>

                <div class="input-control text full-size">
                    <input type="text" name="name" id="name" value="{$data.name}" class="form-control" required placeholder="必填，不超过40个字" maxlength="40">
                </div>
            </div>
            <div class="form_section" style="height: 126px">
                <label for="description">资源描述</label>

                <div class="input-control text full-size">
                    <textarea id="description" name="description" rows="4" class="form-control" required placeholder="必填，不超过500个字" maxlength="500">{$data.description}</textarea>
                </div>
            </div>
        </div>

        <div class="example" data-text="关联数据">
            <div class="form_section">
                <label for="course_id">关联学科</label>

                <div class="input-control text full-size">
                    <select id="course_id" name="course_id"  class="form-control" onchange="getTextbooks()" required>
                        <option value="">-请选择-</option>
                        <volist name="courses" id="dataCourse" empty="">
                            <option value="{$dataCourse.id}" {$data['course_id']==$dataCourse['id']?'selected':''}>{$dataCourse.code} : {$dataCourse.course_name}</option>
                        </volist>
                    </select>
                </div>
            </div>
            <div class="form_section">
                <label for="grade_id">关联年级</label>
                <div class="input-control text full-size">
                    <select id="grade_id" name="grade_id"  class="form-control" onchange="getTextbooks()" required>
                        <option value="">-请选择-</option>
                        <volist name="grades" id="dataGrade" empty="暂时没有信息">
                            <option value="{$dataGrade.id}" {$data['grade_id']==$dataGrade['id']?'selected':''}>{$dataGrade.grade}</option>
                        </volist>
                    </select>
                </div>
            </div>
            <div class="form_section">
                <label for="textbook_id">关联教材</label>
                <div class="input-control text full-size">
                    <select id="textbook_id" name="textbook_id" class="form-control">
                        <option value="">-请选择-</option>
                        <volist name="textbooks" id="dataTextbook">
                            <option value="{$dataTextbook.id}" {$dataTextbook['id']==$data['textbook_id']?'selected':''}>{$dataTextbook.name}</option>
                        </volist>
                    </select>
                </div>
            </div>
        </div>
        <div data-text="资源内容">
            <div>
                <script type="text/plain" id="contentEditor" name="content" style="width:100%;height:340px;">
                {$data.content}
                </script>
            </div>
        </div>
        <div class="form-actions" style="text-align: left; ">
            <button type="submit" class="btn btn-primary">保存</button>
        </div>
    </form>
</div>
<script>
    var um = UM.getEditor('contentEditor');
</script>
<script>
    $("#mainForm").validate();
</script>