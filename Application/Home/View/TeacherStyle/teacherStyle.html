<link href="__PUBLIC_METRO__/css/app/table_list1.css?v=2.0" type="text/css" rel="stylesheet">
<link href="__PUBLIC__/css/teacherStyle.css" type="text/css" rel="stylesheet">
<style>
	.teachTop .teachTopBox .teachRanking2 {
		background: #eee url({$oss_path}public/web_img/TeacherStyle/rankBack.png) repeat center;
		background-size: 100% 100%;
	}

	.teachTop .teachBorder {
		background: url({$oss_path}public/web_img/TeacherStyle/teachBorder.png) repeat-x left top;
		background-size: auto 100%;
	}

	.teachTop .rankImgBox .rankName.blueLeft {
		background: url({$oss_path}public/web_img/TeacherStyle/blueLeft.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.orangeLeft {
		background: url({$oss_path}public/web_img/TeacherStyle/orangeLeft.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.greenLeft {
		background: url({$oss_path}public/web_img/TeacherStyle/greenLeft.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.greenRight {
		background: url({$oss_path}public/web_img/TeacherStyle/greenRight.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.orangeRight {
		background: url({$oss_path}public/web_img/TeacherStyle/orangeRight.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.redLeft {
		background: url({$oss_path}public/web_img/TeacherStyle/redLeft.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachTop .rankImgBox .rankName.redRight {
		background: url({$oss_path}public/web_img/TeacherStyle/redRight.png) no-repeat center;
		background-size: 100% 100%;
	}

	.teachBottom .teachList.active {
		background: url({$oss_path}public/web_img/TeacherStyle/teachBtnBack.png) repeat-x top center;
	}

	.teachBottom .borderBox {
		background: url({$oss_path}public/web_img/TeacherStyle/teachBtnBack.png) repeat-x bottom center;
	}

	.teachBottom .teachSortBox {
		background: url({$oss_path}public/web_img/TeacherStyle/teachSortBack.png) repeat-x top center;
	}

	.teachBottom .teachSort.active .teachSortBtn {
		background: url({$oss_path}public/web_img/TeacherStyle/teachBtnBack.png) repeat-x top center;
		background-size: auto 100%;
	}

	.teachBottom .teachSort.active {
		background: url({$oss_path}public/web_img/TeacherStyle/triangle.png) no-repeat bottom center;
	}
</style>


<empty name="list">
	<div class="emptyDiv">
        <img src="{$oss_path}public/web_img/Empty/teacherStyle.png" alt="">
    </div>
</empty>
<notempty name="list">
	<div class="grayBack">
	<div class="teachStyleOutter">
	<!-- 教师排行榜 -->
	<div class="teachTop">
		<img src="{$oss_path}public/web_img/TeacherStyle/teachTopTitle.png" alt="" class="teachTopTitle">
		<div class="teachTopBox">
			<!-- 左边三个教师 -->
			<div class="teachRanking teachRanking1">
				<volist name="list" id="data" key="k" empty="根据活动结果陆续胜出中，结果敬请期待!">
					<if condition="($k eq 4)">
				<!-- 左一教师 -->
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName blueLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
					<elseif condition="($k eq 5)"/>
				<!-- 左二教师 -->
				<div class="rank">
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
					<div class="rankImgBox rankImgBoxRight">
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<div class="rankName greenRight">{$data.name}</div>
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleRight.png" alt="" class="triangle">
					</div>
				</div>
					<elseif condition="($k eq 6)"/>
				<!-- 左三教师 -->
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName orangeLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
					</if>
				</volist>
			</div>
			<!-- 中间三个教师 -->
			<div class="teachRanking teachRanking2">
				<!-- 中一教师 -->
				<volist name="list" id="data" key="k" empty="根据活动结果陆续胜出中，结果敬请期待!">
					<if condition="($k eq 1)">
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName redLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<img src="{$oss_path}public/web_img/TeacherStyle/first.png" alt="" class="medalImg">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
						<elseif condition="($k eq 2)"/>
				<!-- 中二教师 -->
				<div class="rank">
					<div class="rankTextBox">
						<img src="{$oss_path}public/web_img/TeacherStyle/second.png" alt="" class="medalImg">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
					<div class="rankImgBox rankImgBoxRight">
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<div class="rankName redRight">{$data.name}</div>
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleRight.png" alt="" class="triangle">
					</div>
				</div>
						<elseif condition="($k eq 3)"/>
				<!-- 中三教师 -->
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName redLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<img src="{$oss_path}public/web_img/TeacherStyle/third.png" alt="" class="medalImg">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
					</if>
				</volist>
			</div>
			<!-- 右边三个教师 -->
			<div class="teachRanking teachRanking3">
				<volist name="list" id="data" key="k" empty="根据活动结果陆续胜出中，结果敬请期待!">
					<if condition="($k eq 7)">
				<!-- 右一教师 -->
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName greenLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
					<elseif condition="($k eq 8)"/>
				<!-- 右二教师 -->
				<div class="rank">
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
					<div class="rankImgBox rankImgBoxRight">
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<div class="rankName orangeRight">{$data.name}</div>
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleRight.png" alt="" class="triangle">
					</div>
				</div>
					<elseif condition="($k eq 9)"/>
				<!-- 右三教师 -->
				<div class="rank">
					<div class="rankImgBox rankImgBoxLeft">
						<div class="rankName blueLeft">{$data.name}</div>
						<img src="<?php echo $oss_path.$data['avatar'] ?>" alt="" class="teachAvater">
						<img src="{$oss_path}public/web_img/TeacherStyle/triangleLeft.png" alt="" class="triangle">
					</div>
					<div class="rankTextBox">
						<div class="rankTextTitle" title="{$data.school_name}">{$data.school_name}</div>
						<div class="rankTextSubject" title="{$data.course_name}">学科：{$data.course_name}</div>
						<div class="rankTextIntro" title="{$data.brief_intro}">
							<p>{$data.brief_intro}</p>
						</div>
					</div>
				</div>
					</if>
				</volist>
			</div>
		</div>
		<div class="teachBorder"></div>
	</div>

	<!-- 表格部分 -->
	<div class="teachBottom">
		<!-- 总榜/校榜 -->
		<div class="teachListBox">
			<div class="teachList active defineByOwn" attr-data="all">
				总榜
			</div>
			<?php if(empty($tip)){?>
			<div class="teachList defineByOwn" attr-data="school">
				校榜
			</div>
			<?php }?>
		</div>
		<div class="borderBox"></div>
		<!-- 日/周/月/积分 -->
		<div class="teachSortBox">
			<div class="teachSort sort defineByOwn" attr-data="week">
				<div class="teachSortBtn" >周</div>
			</div>
			<div class="teachSort sort defineByOwn" attr-data="mothe">
				<div class="teachSortBtn" >月</div>
			</div>
			<div class="teachSort sort" attr-data="defaults">
				<div class="teachSortBtn">默认</div>
			</div>
		</div>
		<!-- 教师表格 -->
		<table class="teachTable">
			<thead>
			    <tr>
			      <th style="width: 5%" class="text-center">排行</th>
			      <th style="width: 10%" class="text-center">姓名</th>
			      <th style="width: 20%">学校</th>
			      <th style="width: 12%">学科</th>
			      <th style="width: 5%" class="text-center">教龄</th>
			      <th style="width: 10%" class="text-center">职称</th>
			      <th style="width: 33%">个人介绍</th>
			      <th style="width: 5%" class="text-center">积分</th>
			    </tr>
			</thead>

			<tbody id="body">
			<volist name="list" id="data" key="k" empty="根据活动结果陆续胜出中，结果敬请期待!">
			    <tr>
			    	<td class="text-center"><span class="numId">{$k}</span></td>
			      	 <!--<td class="text-center"><a href="{:U('TeacherStyle/teacherDetails?id=')}{$data.id}">{$data.name}</a></td>-->
					<td class="text-center">{$data.name}</td>
			      	<td>{$data.school_name}</td>
			      	<td>{$data.course_name}</td>
			      	<td class="text-center">{$data.school_age}</td>
			      	<td class="text-center"><if condition="($data.professional eq 1)">正高级教师<elseif condition="($data.professional eq 2)"/>高级教师<elseif condition="($data.professional eq 3)"/>一级教师<elseif condition="($data.professional eq 4)"/>二级教师<else/>三级教师</if></td>
			      	<td>{$data.brief_intro}</td>
			      	<td class="text-center">{$data.points}</td>
			    </tr>
			</volist>
			</tbody>
		</table>
	</div>
	</div>
	</div>
</notempty>


<script>
    function tipResources(){
        var temp_arr = new Array();
        $('.active').each(function (r,v) {
            temp_arr.push($(v).attr('attr-data'));
        });
       // console.log(temp_arr);return false;
        str = '';
        $.ajax({
            url:'/index.php?m=Home&c=TeacherStyle&a=getRankingByAjax',
            type:'post',
            dataType:'json',
            data:{'parms':temp_arr},
			async:false,
            success:function (data) {
                //console.log(data.msg);
                $(data.msg).each(function (i,v) {
                    if(v.professional == 1){
                        var professional = '正高级教师';
                    }else if(v.professional == 2){
                        var professional = '高级教师';
                    }else if(v.professional == 3){
                        var professional = '一级教师';
                    }else if(v.professional == 4){
                        var professional = '二级教师';
                    }else{
                        var professional = '三级教师';
                    }

                    if(temp_arr[0]){
						var points = v.points;
					}

					if(temp_arr[1] == 'defaults'){
                        var points = v.points;
					}else if(temp_arr[1] == 'week'){
                        var points = v.count;
					}else if(temp_arr[1] == 'mothe'){
                        var points = v.count;
                    }

                    console.log(professional);
                        str += '<tr><td class="text-center"><span class="numId">'+(i+1)+'</span></td> <td class="text-center">'+v.name+'</td><td>'+v.school_name+'</td><td>'+v.course_name+'</td> <td class="text-center">'+v.school_age+'</td><td class="text-center">'+professional+'</td><td>'+v.brief_intro+'</td> <td class="text-center">'+points+'</td></tr>';

                })
                $('#body').empty();
                $('#body').append(str);
            },
            error:function () {
                alert(cuo);
            }
        })
    }
	// 总榜/校榜相互切换
	$('.teachList').click(function(){
		$(this).addClass('active').siblings('.teachList').removeClass('active');
        tipResources();
        win();
        isempty();
    })

	// 日/周/月/积分相互切换
	$('.sort').click(function(){
		$(this).addClass('active').siblings('.teachSort').removeClass('active');
        tipResources();
        win();
        isempty();
    })

    isempty();
    function isempty() {
    //表格如果为空，显示空
    $('.teachTable').find('td').each(function(i,n){
        if($(this).html() == '' || $(this).html() == 'null') {
            var emptyText = '<span style="color: #ccc">暂时为空</span>'
            $(this).html(emptyText)
        }
    })

}

	$(function() { 
		//教师排行榜显示三行
		$(".rankTextIntro").each(function(i){
			var divH = $(this).height();
			var $p = $("p", $(this)).eq(0);
			while ($p.outerHeight() > divH) {
				$p.text($p.text().replace(/(\s)*([a-zA-Z0-9]+|\W)(\.\.\.)?$/, "..."));
			};
		});
	})
</script>
<script>
	win();
function win() {
    // 表格前三行数字特殊
    $('.teachTable tbody tr:nth-child(1) td:nth-child(1)').html('<img src="{$oss_path}public/web_img/TeacherStyle/one.png" class="numImg">');
    $('.teachTable tbody tr:nth-child(2) td:nth-child(1)').html('<img src="{$oss_path}public/web_img/TeacherStyle/two.png" class="numImg">');
    $('.teachTable tbody tr:nth-child(3) td:nth-child(1)').html('<img src="{$oss_path}public/web_img/TeacherStyle/three.png" class="numImg">')
}

</script>
