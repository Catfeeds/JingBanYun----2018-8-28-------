<layout name="exercise"/>
<script type="text/javascript" src="__PUBLIC__/adminExercise/js/new_ueditor/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="__PUBLIC__/adminExercise/js/new_ueditor/ueditor/ueditor.all.js"></script>
<script type="text/javascript" src="__PUBLIC__/adminExercise/js/vue.js"></script>
<script type="text/javascript" src="__PUBLIC__/adminExercise/js/vue-resource.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/adminExercise/js/exerciseNotify.js"></script>
<style media="screen">
	html,body{
		min-width: 1100px
	}
	li{
		list-style: none
	}
	.boxOutter{
		width: 1138px
	}
	.red{
		display: none
	}
</style>
<div class="boxOutter border-none p0" id="app" v-cloak> 
		<li class="createCompletionLicontent  pt0 border-none">
		<div class="mt10 mb10 of">
			<span class="color3baeabFixed textSpan left mr5">二级题目</span>
				<!--<span class="textSpan">题干</span>-->
			<div style="width: 580px;height: 115px;" class="dib left">
					<script type="text/plain" id="message" name="message" style="width:100%;height:50px;">{$exercise_info.subject_name|html_entity_decode}</script>
				</div>

				<div class="dib  mt10 red classred dn">
					*该项不可为空
				</div>
			</div>
		</li>

	<div class="">

		<div class="ml62">
			<span >选项数量</span>
			<select class="exerciseNums selectSize" name="" onchange="optionShow(this)">
				<option <if condition="($exercise_info['num'] eq 2)">selected</if> value="2">2</option>
				<option <if condition="($exercise_info['num'] eq 3)">selected</if> value="3">3</option>
				<option <if condition="($exercise_info['num'] eq 4)">selected</if> value="4">4</option>
				<option <if condition="($exercise_info['num'] eq 5)">selected</if> value="5">5</option>
				<option <if condition="($exercise_info['num'] eq 6)">selected</if> value="6">6</option>
				<option <if condition="($exercise_info['num'] eq 7)">selected</if> value="7">7</option>
				<option <if condition="($exercise_info['num'] eq 8)">selected</if> value="8">8</option>
			</select>
			<div class="mt10 editors db">
				<span class="textSpan optionSpan left">A</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageA" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="A" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'A') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
						 <div class="dib left mt10 red classred">
					*该项不可为空
				</div>
						<div class="dib left mt10 red classred oneAnswer">
					*请选择答案
				</div>
			</div>
			<div class="mt10 editors db">
				<span class="textSpan optionSpan left">B</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageB" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="B" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'B') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
							<div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors db">
				<span class="textSpan optionSpan left">C</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageC" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="C" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'C') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
                             <div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors db">
				<span class="textSpan optionSpan left">D</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageD" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="D" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'D') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
								<div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors dn">
				<span class="textSpan optionSpan left">E</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageE" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="E" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'E') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
								 <div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors dn">
				<span class="textSpan optionSpan left">F</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageF" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button"  answer_id="F" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'F') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
									<div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors dn">
				<span class="textSpan optionSpan left">G</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageG" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="G" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'G') !== false? 'active':'' ?>">设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect">取消设置</button>
				<br>
									 <div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
			<div class="mt10 editors dn">
				<span class="textSpan optionSpan left">H</span>
				<div style="width: 580px;" class="dib left mr10">
					<script type="text/plain" id="messageH" name="message" style="width:100%;height:50px;"></script>
				</div>
				<button type="button" name="button" answer_id="H" class="btn textSpan setAnswer <?= strpos($exercise_info['right_key'],'H') !== false? 'active':'' ?>" >设为答案</button>
				<button type="button" name="button" class="btn textSpan Deselect" >取消设置</button>
				<br>
										<div class="dib left mt10 red classred">
					*该项不可为空
				</div>
			</div>
		</div>



		<div class="mtb10">
			<span class="color3baeabFixed w64 mr0">分数</span>
			<input type="number" class="Fractiondata inputCommon" value="{$exercise_info.score}">
					<span class="red classred" >*格式不正确请重新输入</span>

		</div>
		<div class="mtb10">
			<div class="borderBottom">
				<p  class="tabBtn pl20 pr20 text-center">解析</p>
							<span class="  mt10 red classred jxtext">
					*该项不可为空
				</span>
			</div>
			<div class="mt10 mb10 of">
				<script type="text/plain" id="messageJx" name="message" style="width:95%;height:150px;">{$exercise_info.analysis|html_entity_decode}</script>

			</div>


		</div>
		<div class="">

		</div>

		</li>
		</ul>
	</div>
	<div class="daan" style="display: none;">{$exercise_info.answer}</div>
</div>
<div class="exercise_choice dn">
	<div class="exerciseTitle">
		<p class="box1000 mt20 of pr20">

			<button type="button" name="button" class="btn right mr0 answer4">所有选项一行</button>
			<button type="button" name="button" class="btn right answer2">每行两个选项</button>
			<button type="button" name="button" class="btn right answer1">每行一个选项</button>
		</p>
		<div class="">
			<div class="p15 pb0">
				<span class="numval">
				</span>
				<span class="score"></span>
				<span class="caption"></span>
			</div>
			<ul class="borderBottomEEE exerciseContent ">
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
				<li style="display:none"></li>
			</ul>
			<div class="exerciseAnswer">
				<span class="color3baeab">【答案】</span>
				<span class="solution"></span>
			</div>
			<div class="exerciseJx borderBottomEEE">
				<span class="color3baeab">【解析】</span>
				<span class="analysisSpan"></span>
			</div>
		</div>
	</div>
</div>
<input type="hidden" class="setAnswerinfo">
<script src="__PUBLIC__/adminExercise/js/input/loading.js"></script>
<script>
	var ueMessage = UE.getEditor('message');
	var messageA = UE.getEditor('messageA');
	var messageB = UE.getEditor('messageB');
	var messageC = UE.getEditor('messageC');
	var messageD = UE.getEditor('messageD');
	var messageE = UE.getEditor('messageE');
	var messageF = UE.getEditor('messageF');
	var messageG = UE.getEditor('messageG');
	var messageH = UE.getEditor('messageH');
	var messageJx = UE.getEditor('messageJx');

	var arr = new Array();
	arr[0] = 'A';
	arr[1] = 'B';
	arr[2] = 'C';
	arr[3] = 'D';
	arr[4] = 'E';
	arr[5] = 'F';
	arr[6] = 'G';
	arr[7] = 'H';
	var num = "{$exercise_info.num}";
	var answer = $('.daan').html();
	answer = answer.split('jingbanyunxx');


	for(var i=0; i< num;i++) {
		var testVar = null;
		eval('testVar=message'+arr[i]);
		testVar.data =  answer[i];
		testVar.ready(function() {
			this.setContent(this.data);
		});
	}

		var abcArr = new Array();
  		abcArr = ['A','B','C','D','E','F','G','H']
		function resShow(){
			var a = 0;

			if($('.inputCommon').val().length == ''){
				$('.inputCommon').siblings('.red').show();
				a++
			}else{
				$('.inputCommon').siblings('.red').hide();
			}
			for (var j = 0; j <$('.exerciseNums').children('option:selected').val(); j++) {
				if(UE.getEditor('message'+abcArr[j]).getContentLength() == 0){
					$('.editors').eq(j).find('.red').show();
					a++;
				}else {
					$('.editors').eq(j).find('.red').hide();
				}
			}
			if(UE.getEditor('messageJx').getContentLength() == 0){
				$('.jxtext').show();
				a++
			}else{
				$('.jxtext').hide();
			}
			if($('.ml62').find('.active').length== 0){
				$('.oneAnswer').show();
				console.log(1)
				a++
			}else{
				$('.oneAnswer').hide();
			}
			return a
		}
			function exerciseHtml(){
			// var html = '';
			$('.exerciseContent').children('li').hide()
			$('.solution').html('')
			$('.score').text('('+$('.inputCommon').val()+'分)');
			var title = ueMessage.getContent();
			$('.caption').html(title);
			var exerciseNum = $('.exerciseNums').children('option:selected').val();
			var ueName = [messageA,messageB,messageC,messageD,messageE,messageF,messageG,messageH];
			for(var i=0;i<exerciseNum;i++){
				let word = $('.editors').eq(i).children('.optionSpan').text()+'.';
				$('.exerciseContent').children().eq(i).show().html(word+ueName[i].getContent())
			}
			for(var i=0;i<exerciseNum;i++){
				var answerName = $('.editors').eq(i).find('.active').parents('.editors').children('.optionSpan').text()
				$('.solution').append('<span>'+answerName+'</span>')
			}
			var analysis = messageJx.getContent();
			$('.analysisSpan').html(analysis)
			return $('.exercise_choice').html();
		}
</script>

<script type="text/javascript" src="__PUBLIC__/adminExercise/js/input/editinput.js"></script>

<script>
	optionShow('.exerciseNums');
</script>
